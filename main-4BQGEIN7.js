import{a as xt,c as ee,d as zt,e as ge,f as Ye,g as b,h as se,i as qt,j as Yt,k as Kt,m as Ke,o as ve,p as Jt,q as Je,r as Y}from"./chunk-ZPX6YQTG.js";import{$a as h,Bb as $t,Db as Wt,Eb as Q,Fa as Oe,Fb as de,Ga as N,Gb as qe,Ha as Ht,Ja as jt,La as a,M as vt,Ma as y,N as P,O as _t,Oa as Ct,Q as he,Qa as u,Ra as Ne,S as A,T as O,V as S,Va as _,W as yt,Wa as fe,X as re,Xa as f,Y as ze,Ya as Bt,Za as H,_a as Lt,a as T,ab as bt,b as L,ba as Nt,bb as V,ca as g,cb as k,da as v,db as r,ea as F,eb as o,fa as U,fb as m,ga as Rt,gb as x,i as It,jb as p,ka as oe,kb as d,l as Tt,lb as St,m as Ot,mb as l,n as K,na as J,nb as w,oa as Z,ob as C,pa as Te,pb as Re,q as z,qb as M,rb as E,sb as j,tb as q,v as ne,vb as Ut,x as X,zb as Gt}from"./chunk-HHCBQX7F.js";var ri=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(y(Ct),y(Te))}}static{this.\u0275dir=re({type:i})}}return i})(),Vi=(()=>{class i extends ri{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Rt(i)))(s||i)}})()}static{this.\u0275dir=re({type:i,features:[Ne]})}}return i})(),oi=new he("");var ki={provide:oi,useExisting:vt(()=>be),multi:!0};function Fi(){let i=xt()?xt().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Pi=new he(""),be=(()=>{class i extends ri{constructor(t,n,s){super(t,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Fi())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(y(Ct),y(Te),y(Pi,8))}}static{this.\u0275dir=re({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,s){n&1&&p("input",function(R){return s._handleInput(R.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(R){return s._compositionEnd(R.target.value)})},features:[Re([ki]),Ne]})}}return i})();var Ai=new he(""),Ii=new he("");function si(i){return i!=null}function ai(i){return Ut(i)?Tt(i):i}function li(i){let e={};return i.forEach(t=>{e=t!=null?T(T({},e),t):e}),Object.keys(e).length===0?null:e}function ci(i,e){return e.map(t=>t(i))}function Ti(i){return!i.validate}function di(i){return i.map(e=>Ti(e)?e:t=>e.validate(t))}function Oi(i){if(!i)return null;let e=i.filter(si);return e.length==0?null:function(t){return li(ci(t,e))}}function ui(i){return i!=null?Oi(di(i)):null}function Ni(i){if(!i)return null;let e=i.filter(si);return e.length==0?null:function(t){let n=ci(t,e).map(ai);return ne(n).pipe(z(li))}}function pi(i){return i!=null?Ni(di(i)):null}function Xt(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Ri(i){return i._rawValidators}function Hi(i){return i._rawAsyncValidators}function Mt(i){return i?Array.isArray(i)?i:[i]:[]}function Ze(i,e){return Array.isArray(i)?i.includes(e):i===e}function Zt(i,e){let t=Mt(e);return Mt(i).forEach(s=>{Ze(t,s)||t.push(s)}),t}function Qt(i,e){return Mt(e).filter(t=>!Ze(i,t))}var Qe=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ui(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wt=class extends Qe{get formDirective(){return null}get path(){return null}},Ue=class extends Qe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Dt=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ji={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Br=L(T({},ji),{"[class.ng-submitted]":"isSubmitted"}),tt=(()=>{class i extends Dt{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(y(Ue,2))}}static{this.\u0275dir=re({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,s){n&2&&H("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ne]})}}return i})();var He="VALID",Xe="INVALID",_e="PENDING",je="DISABLED",Ce=class{},et=class extends Ce{constructor(e,t){super(),this.value=e,this.source=t}},Be=class extends Ce{constructor(e,t){super(),this.pristine=e,this.source=t}},Le=class extends Ce{constructor(e,t){super(),this.touched=e,this.source=t}},ye=class extends Ce{constructor(e,t){super(),this.status=e,this.source=t}};function Bi(i){return(it(i)?i.validators:i)||null}function Li(i){return Array.isArray(i)?ui(i):i||null}function Ui(i,e){return(it(e)?e.asyncValidators:i)||null}function Gi(i){return Array.isArray(i)?pi(i):i||null}function it(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var Et=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Q(()=>this.statusReactive()),this.statusReactive=u(void 0),this._pristine=Q(()=>this.pristineReactive()),this.pristineReactive=u(!0),this._touched=Q(()=>this.touchedReactive()),this.touchedReactive=u(!1),this._events=new It,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return de(this.statusReactive)}set status(e){de(()=>this.statusReactive.set(e))}get valid(){return this.status===He}get invalid(){return this.status===Xe}get pending(){return this.status==_e}get disabled(){return this.status===je}get enabled(){return this.status!==je}get pristine(){return de(this.pristineReactive)}set pristine(e){de(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return de(this.touchedReactive)}set touched(e){de(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Zt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Zt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qt(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qt(e,this._rawAsyncValidators))}hasValidator(e){return Ze(this._rawValidators,e)}hasAsyncValidator(e){return Ze(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(L(T({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Le(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Le(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(L(T({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Be(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Be(!0,n))}markAsPending(e={}){this.status=_e;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ye(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(L(T({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=je,this.errors=null,this._forEachChild(s=>{s.disable(L(T({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new et(this.value,n)),this._events.next(new ye(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(L(T({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=He,this._forEachChild(n=>{n.enable(L(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(L(T({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===He||this.status===_e)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new et(this.value,t)),this._events.next(new ye(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(L(T({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?je:He}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=_e,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=ai(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,s)=>n&&n._find(s),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new ye(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new oe,this.statusChanges=new oe}_calculateStatus(){return this._allControlsDisabled()?je:this.errors?Xe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_e)?_e:this._anyControlsHaveStatus(Xe)?Xe:He}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),s=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),s&&this._events.next(new Be(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Le(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){it(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Li(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Gi(this._rawAsyncValidators)}};var mi=new he("CallSetDisabledState",{providedIn:"root",factory:()=>Vt}),Vt="always";function $i(i,e){return[...e.path,i]}function Wi(i,e,t=Vt){qi(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Yi(i,e),Ji(i,e),Ki(i,e),zi(i,e)}function ei(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zi(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function qi(i,e){let t=Ri(i);e.validator!==null?i.setValidators(Xt(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=Hi(i);e.asyncValidator!==null?i.setAsyncValidators(Xt(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let s=()=>i.updateValueAndValidity();ei(e._rawValidators,s),ei(e._rawAsyncValidators,s)}function Yi(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&hi(i,e)})}function Ki(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&hi(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function hi(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ji(i,e){let t=(n,s)=>{e.valueAccessor.writeValue(n),s&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function Xi(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Zi(i){return Object.getPrototypeOf(i.constructor)===Vi}function Qi(i,e){if(!e)return null;Array.isArray(e);let t,n,s;return e.forEach(c=>{c.constructor===be?t=c:Zi(c)?n=c:s=c}),s||n||t||null}function ti(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function ii(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var en=class extends Et{constructor(e=null,t,n){super(Bi(t),Ui(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),it(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ii(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ti(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ti(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ii(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tn={provide:Ue,useExisting:vt(()=>Ge)},ni=Promise.resolve(),Ge=(()=>{class i extends Ue{constructor(t,n,s,c,R,B){super(),this._changeDetectorRef=R,this.callSetDisabledState=B,this.control=new en,this._registered=!1,this.name="",this.update=new oe,this._parent=t,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=Qi(this,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xi(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ni.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,s=n!==0&&Wt(n);ni.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$i(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(y(wt,9),y(Ai,10),y(Ii,10),y(oi,10),y($t,8),y(mi,8))}}static{this.\u0275dir=re({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Re([tn]),Ne,Nt]})}}return i})();var nn=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=yt({type:i})}static{this.\u0275inj=_t({})}}return i})();var Se=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:mi,useValue:t.callSetDisabledState??Vt}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=yt({type:i})}static{this.\u0275inj=_t({imports:[nn]})}}return i})();var nt={normal:{bg:"bg-gray-100",text:"text-gray-800"},fire:{bg:"bg-red-100",text:"text-red-800"},water:{bg:"bg-blue-100",text:"text-blue-800"},electric:{bg:"bg-yellow-100",text:"text-yellow-800"},grass:{bg:"bg-green-100",text:"text-green-800"},ice:{bg:"bg-cyan-100",text:"text-cyan-800"},fighting:{bg:"bg-orange-100",text:"text-orange-800"},poison:{bg:"bg-purple-100",text:"text-purple-800"},ground:{bg:"bg-amber-100",text:"text-amber-800"},flying:{bg:"bg-indigo-100",text:"text-indigo-800"},psychic:{bg:"bg-pink-100",text:"text-pink-800"},bug:{bg:"bg-lime-100",text:"text-lime-800"},rock:{bg:"bg-stone-100",text:"text-stone-800"},ghost:{bg:"bg-violet-100",text:"text-violet-800"},dragon:{bg:"bg-teal-100",text:"text-teal-800"},dark:{bg:"bg-zinc-100",text:"text-zinc-800"},steel:{bg:"bg-slate-100",text:"text-slate-800"},fairy:{bg:"bg-rose-100",text:"text-rose-800"}},gi=255,vi=5;var rn=(i,e)=>e.type.name;function on(i,e){if(i&1&&(r(0,"span",2),l(1),E(2,"titlecase"),o()),i&2){let t=e.$implicit,n=d();Lt(n.getTypeClasses(t.type.name)),a(),C(" ",j(2,3,t.type.name)," ")}}var xe=class i{types=[];getTypeClasses(e){let t=nt[e];return`${t.bg} ${t.text}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-pokemon-types"]],inputs:{types:"types"},standalone:!0,features:[M],decls:3,vars:0,consts:[[1,"flex","gap-2"],[1,"px-3","py-1","rounded-full","text-sm",3,"class"],[1,"px-3","py-1","rounded-full","text-sm"]],template:function(t,n){t&1&&(r(0,"div",0),V(1,on,3,5,"span",1,rn),o()),t&2&&(a(),k(n.types))},dependencies:[b,ee],encapsulation:2})};var sn=(i,e)=>e.name;function an(i,e){if(i&1){let t=x();r(0,"tr",7)(1,"td",8)(2,"div",9),l(3),E(4,"titlecase"),o()(),r(5,"td",8),m(6,"img",10),o(),r(7,"td",8),m(8,"app-pokemon-types",11),o(),r(9,"td",12)(10,"div",13)(11,"button",14),p("click",function(){let s=g(t).$implicit,c=d();return v(c.reloadPokemon(s))}),F(),r(12,"svg",15),m(13,"path",16),o()(),U(),r(14,"button",17),p("click",function(){let s=g(t).$implicit,c=d();return v(c.deletePokemon(s))}),F(),r(15,"svg",15),m(16,"path",18),o()()()()()}if(i&2){let t=e.$implicit;a(3),C(" ",j(4,4,t.name)," "),a(3),f("src",t.sprites.front_default,N)("alt",t.name),a(2),f("types",t.types)}}var rt=class i{searchHistory=Z([]);deleteEntry=J();reloadEntry=J();deletePokemon(e){this.deleteEntry.emit(e)}reloadPokemon(e){this.reloadEntry.emit(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-pokemon-history-table"]],inputs:{searchHistory:[1,"searchHistory"]},outputs:{deleteEntry:"deleteEntry",reloadEntry:"reloadEntry"},standalone:!0,features:[M],decls:17,vars:0,consts:[[1,"mt-8"],[1,"text-xl","font-semibold","mb-4"],[1,"w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"h-12","w-12",3,"src","alt"],[3,"types"],[1,"px-6","py-4","whitespace-nowrap","text-right"],[1,"flex","justify-end","space-x-2"],["title","Reload Pokemon",1,"text-blue-600","hover:text-blue-900","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Delete from history",1,"text-red-600","hover:text-red-900","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"h2",1),l(2,"Recent Pokemon Searches"),o(),r(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),l(7," Pokemon "),o(),r(8,"th",4),l(9," Sprite "),o(),r(10,"th",4),l(11," Types "),o(),r(12,"th",5),l(13," Actions "),o()()(),r(14,"tbody",6),V(15,an,17,6,"tr",7,sn),o()()()),t&2&&(a(15),k(n.searchHistory()))},dependencies:[b,ee,xe],encapsulation:2})};var we=class i{constructor(e){this.http=e;this.loadPokemonList()}apiUrl="https://pokeapi.co/api/v2/pokemon/";pokemonList=[];maxPokemonSuggestions=5;loadPokemonList(){this.http.get(`${this.apiUrl}?limit=100000&offset=0`).subscribe({next:e=>{this.pokemonList=e.results.map(t=>t.name)},error:e=>console.error("Error loading Pokemon list:",e)})}getPokemon(e){return this.http.get(`${this.apiUrl}${e.toLowerCase()}`).pipe(X(t=>t.status===404?K(()=>new Error("Pokemon not found")):K(()=>new Error("An error occurred while fetching Pokemon data"))))}filterPokemon(e){let t=e.toLowerCase();return this.pokemonList.filter(n=>n.startsWith(t)).slice(0,this.maxPokemonSuggestions)}static \u0275fac=function(t){return new(t||i)(A(se))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var ln=(i,e)=>e.stat.name,cn=(i,e)=>e.ability.name,dn=(i,e)=>e.move.name;function un(i,e){if(i&1){let t=x();r(0,"button",15),p("click",function(){g(t);let s=d(2);return v(s.closeCard())}),F(),r(1,"svg",16),m(2,"path",17),o()()}}function pn(i,e){if(i&1&&(r(0,"div",28)(1,"div",34)(2,"span"),l(3),E(4,"titlecase"),o(),r(5,"span",35),l(6),o()(),r(7,"div",36),m(8,"div",37),o()()),i&2){let t=e.$implicit;a(3),C("",j(4,4,t.stat.name),":"),a(3),w(t.base_stat),a(2),Bt("width",t.base_stat/255*100,"%")}}function mn(i,e){if(i&1&&(r(0,"span",31),l(1),E(2,"titlecase"),o()),i&2){let t=e.$implicit;a(),C(" ",j(2,1,t.ability.name)," ")}}function hn(i,e){if(i&1&&(r(0,"span",31),l(1),E(2,"titlecase"),o()),i&2){let t=e.$implicit;a(),C(" ",j(2,1,t.move.name)," ")}}function fn(i,e){if(i&1){let t=x();r(0,"div",6)(1,"div",18)(2,"h2",19),l(3),E(4,"titlecase"),o(),r(5,"div",20)(6,"img",21),p("click",function(){g(t);let s=d(2);return v(s.toggleSprite())}),o(),r(7,"img",21),p("click",function(){g(t);let s=d(2);return v(s.toggleSprite())}),o(),r(8,"p",22),l(9),o()()(),r(10,"div",23)(11,"div",24)(12,"h3",25),l(13,"Types"),o(),m(14,"app-pokemon-types",26),o(),r(15,"div",24)(16,"h3",25),l(17,"Base Stats"),o(),r(18,"div",27),V(19,pn,9,6,"div",28,ln),o()(),r(21,"div",29)(22,"h3",25),l(23,"Abilities"),o(),r(24,"div",30),V(25,mn,3,3,"span",31,cn),o()(),r(27,"div",29)(28,"h3",25),l(29,"Moves (First 5)"),o(),r(30,"div",30),V(31,hn,3,3,"span",31,dn),o()(),r(33,"div",32)(34,"div",33)(35,"span"),l(36),o(),r(37,"span"),l(38),o()()()()()}if(i&2){let t=d(2);a(3),C(" ",j(4,9,t.pokemonData().name)," "),a(3),f("src",t.getSpriteSrc("front"),N)("alt",t.pokemonData().name+" front"),a(),f("src",t.getSpriteSrc("back"),N)("alt",t.pokemonData().name+" back"),a(2),C(" Click to toggle ",t.currentSprite()==="default"?"shiny":"normal"," sprite "),a(5),f("types",t.pokemonData().types),a(5),k(t.pokemonData().base_stats),a(6),k(t.pokemonData().abilities),a(6),k(t.pokemonData().moves.slice(0,5)),a(5),C("Height: ",t.pokemonData().height/10,"m"),a(2),C("Weight: ",t.pokemonData().weight/10,"kg")}}function gn(i,e){i&1&&(r(0,"div",13),m(1,"div",38),r(2,"p",39),l(3,"Loading Pokemon data..."),o()())}function vn(i,e){if(i&1){let t=x();r(0,"div",14)(1,"p"),l(2),o(),r(3,"button",40),p("click",function(){g(t);let s=d(2);return v(s.loadPokemon())}),l(4," Retry "),o()()}if(i&2){let t=d(2);a(2),w(t.error())}}function _n(i,e){if(i&1){let t=x();r(0,"div",4),p("click",function(s){g(t);let c=d();return v(c.handleBackdropClick(s))}),m(1,"div",5),r(2,"div",6)(3,"div",7),_(4,un,3,0,"button",8),r(5,"div",9)(6,"div",10)(7,"div",11),_(8,fn,39,11,"div",6),o(),r(9,"div",12),_(10,gn,4,0,"div",13)(11,vn,5,1,"div",14),o()()()()()()}if(i&2){let t=d();a(4),h(t.pokemonData()&&!t.isLoading()?4:-1),a(2),H("flipped",t.isFlipped()),a(2),h(t.pokemonData()&&!t.isLoading()?8:-1),a(2),h(t.isLoading()?10:-1),a(),h(t.error()?11:-1)}}var ot=class i{constructor(e){this.pokemonService=e}MAX_HISTORY=5;STORAGE_KEY="pokemon-history";POKEMON_TYPE_COLORS=nt;MAX_STAT_VALUE=gi;DISPLAYED_MOVES_COUNT=vi;pokemonData=u(void 0);isLoading=u(!1);error=u(void 0);currentSprite=u("default");pokemonName="";searchTerm=u("");searchHistory=u([]);isFlipped=u(!1);isVisible=u(!1);ngOnInit(){this.loadSearchHistory()}loadSearchHistory(){let e=localStorage.getItem(this.STORAGE_KEY);e&&this.searchHistory.set(JSON.parse(e))}searchPokemon(e){this.pokemonName=e,this.loadPokemon()}loadPokemon(){this.isLoading.set(!0),this.error.set(void 0),this.isFlipped.set(!0),this.pokemonService.getPokemon(this.pokemonName).subscribe({next:e=>{setTimeout(()=>{this.pokemonData.set(e),this.updateSearchHistory(e),this.isLoading.set(!1),this.isFlipped.set(!1),this.isVisible.set(!0)},300)},error:e=>{this.error.set("Pokemon not found. Please try another name."),this.isLoading.set(!1),this.isFlipped.set(!1),this.isVisible.set(!1),console.error("Error loading Pokemon:",e)}})}updateSearchHistory(e){let t=this.searchHistory();this.searchHistory.set([e,...t.filter(n=>n.name!==e.name)].slice(0,this.MAX_HISTORY)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}toggleSprite(){this.currentSprite.set(this.currentSprite()==="default"?"shiny":"default")}getSpriteSrc(e){return this.pokemonData()?.sprites?this.currentSprite()==="shiny"?e==="front"?this.pokemonData()?.sprites.other.showdown.front_shiny||"":this.pokemonData()?.sprites.other.showdown.back_shiny||"":e==="front"?this.pokemonData()?.sprites.front_default||"":this.pokemonData()?.sprites.back_default||"":""}handleDeletePokemon(e){this.searchHistory.set(this.searchHistory().filter(t=>t.name!==e.name)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}closeCard(){this.isVisible.set(!1),this.pokemonData.set(void 0),this.searchTerm.set("")}handleBackdropClick(e){e.target.classList.contains("fixed")&&this.closeCard()}static \u0275fac=function(t){return new(t||i)(y(we))};static \u0275cmp=S({type:i,selectors:[["app-playing-card"]],standalone:!0,features:[M],decls:4,vars:2,consts:[[1,"flex","flex-col","items-center","min-h-[400px]","w-full"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"w-full"],[3,"deleteEntry","reloadEntry","searchHistory"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","transition-opacity","modal-backdrop"],[1,"flex","h-full"],[1,"w-full","max-w-5xl","mx-auto","card-container","relative","bg-white","shadow-xl","modal-content"],[1,"absolute","right-4","top-4","z-20","bg-white","rounded-full","p-1.5","shadow-lg","hover:bg-gray-100","transition-colors","duration-200"],[1,"h-full","overflow-y-auto"],[1,"card"],[1,"card-face","front"],[1,"card-face","back"],[1,"bg-white","rounded-xl","shadow-lg","p-8","text-center"],[1,"bg-white","rounded-xl","shadow-lg","p-8","text-center","text-red-600"],[1,"absolute","right-4","top-4","z-20","bg-white","rounded-full","p-1.5","shadow-lg","hover:bg-gray-100","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"w-1/3","p-6","bg-gray-50","border-r","border-gray-200"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"flex","flex-col","items-center","space-y-4"],[1,"w-48","h-48","cursor-pointer",3,"click","src","alt"],[1,"text-center","text-sm","text-gray-600"],[1,"w-2/3","p-6"],[1,"mb-6"],[1,"font-semibold","mb-2"],[3,"types"],[1,"space-y-2"],[1,"text-sm"],[1,"mt-6"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","bg-gray-100","rounded-full","text-sm"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"flex","justify-between","text-sm","text-gray-600"],[1,"flex","justify-between"],[1,"font-medium"],[1,"w-full","bg-gray-200","rounded-full","h-1.5"],[1,"bg-blue-600","h-1.5","rounded-full"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-gray-900","mx-auto"],[1,"mt-4"],[1,"mt-4","px-4","py-2","bg-blue-500","text-white","rounded","hover:bg-blue-600",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0),_(1,_n,12,6,"div",1),r(2,"div",2)(3,"app-pokemon-history-table",3),p("deleteEntry",function(c){return n.handleDeletePokemon(c)})("reloadEntry",function(c){return n.searchPokemon(c.name)}),o()()()),t&2&&(a(),h(n.isVisible()?1:-1),a(2),f("searchHistory",n.searchHistory()))},dependencies:[b,ee,Se,xe,rt],styles:["[_nghost-%COMP%]{display:block;padding:1rem}.pokemon-card[_ngcontent-%COMP%]{transition:all .3s ease}.pokemon-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-bar[_ngcontent-%COMP%]{transition:width .5s ease-out}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.loading-shimmer[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 2s infinite linear;background:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-size:1000px 100%}.modal-backdrop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.card-container[_ngcontent-%COMP%]{perspective:1000px;height:100vh}"]})};var De=class i{transform(e,t){if(!t)return e;let n=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s=new RegExp(n,"gi");return e.replace(s,c=>`<strong>${c}</strong>`)}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=ze({name:"highlight",type:i,pure:!0,standalone:!0})};function yn(i,e){if(i&1){let t=x();r(0,"button",13),E(1,"titlecase"),E(2,"highlight"),p("click",function(){let s=g(t).$implicit,c=d(3);return v(c.selectSuggestion(s))})("mousedown",function(s){return g(t),v(s.preventDefault())}),o()}if(i&2){let t=e.$implicit,n=d(3);f("innerHTML",q(2,3,j(1,1,t),n.searchTerm()),Oe)}}function Cn(i,e){if(i&1&&(r(0,"div",8)(1,"div",10),l(2,"Recent searches"),o(),r(3,"div",11),V(4,yn,3,6,"button",12,bt),o()()),i&2){let t=d(2);a(4),k(t.searchHistory())}}function bn(i,e){if(i&1){let t=x();r(0,"button",15),E(1,"titlecase"),E(2,"highlight"),p("click",function(){let s=g(t).$implicit,c=d(3);return v(c.selectSuggestion(s))})("mousedown",function(s){return g(t),v(s.preventDefault())}),o()}if(i&2){let t=e.$implicit,n=d(3);f("innerHTML",q(2,3,j(1,1,t),n.searchTerm()),Oe)}}function Sn(i,e){if(i&1&&(r(0,"div",9),V(1,bn,3,6,"button",14,bt),o()),i&2){let t=d(2);a(),k(t.suggestions())}}function xn(i,e){if(i&1&&(r(0,"div",6),_(1,Cn,6,0,"div",8)(2,Sn,3,0,"div",9),o()),i&2){let t=d();a(),h(t.searchHistory().length>0?1:-1),a(),h(t.suggestions().length>0&&t.searchTerm().length>=2?2:-1)}}function Mn(i,e){if(i&1&&(r(0,"p",7),l(1),o()),i&2){let t=d();a(),w(t.error())}}var st=class i{constructor(e){this.pokemonService=e;this.loadSearchHistory()}isLoading=Z(!1);error=Z(void 0);searchSubmitted=J();searchTerm=u("");suggestions=u([]);searchHistory=u([]);isInputFocused=u(!1);MAX_HISTORY=8;STORAGE_KEY="pokemon-search-history";loadSearchHistory(){let e=localStorage.getItem(this.STORAGE_KEY);this.searchHistory.set(e?JSON.parse(e):[])}saveSearchHistory(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}onInputFocus(){this.isInputFocused.set(!0)}onInputBlur(){setTimeout(()=>{this.isInputFocused.set(!1)},200)}onSearchChange(e){e.length>=2?this.suggestions.set(this.pokemonService.filterPokemon(e)):this.suggestions.set([])}selectSuggestion(e){this.searchTerm.set(e),this.suggestions.set([]),this.search()}search(){if(!this.searchTerm().trim())return;let e=this.searchTerm().toLowerCase();this.searchHistory.set([e,...this.searchHistory().filter(t=>t!==e)].slice(0,this.MAX_HISTORY)),this.saveSearchHistory(),this.suggestions.set([]),this.searchSubmitted.emit(e)}static \u0275fac=function(t){return new(t||i)(y(we))};static \u0275cmp=S({type:i,selectors:[["app-pokemon-search"]],inputs:{isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{searchSubmitted:"searchSubmitted"},standalone:!0,features:[M],decls:8,vars:3,consts:[[1,"relative","w-full"],[1,"relative","flex","items-center"],[1,"absolute","left-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search a pokemon",1,"w-full","pl-12","pr-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"ngModelChange","focus","blur","keyup.enter","ngModel"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","overflow-auto"],[1,"text-red-500","text-sm","mt-2"],[1,"p-3"],[1,"border-t","border-gray-100"],[1,"text-xs","text-gray-500","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","bg-gray-100","hover:bg-gray-200","rounded-full","text-sm","transition-colors","duration-150",3,"innerHTML"],[1,"px-3","py-1","bg-gray-100","hover:bg-gray-200","rounded-full","text-sm","transition-colors","duration-150",3,"click","mousedown","innerHTML"],[1,"w-full","px-4","py-2","text-left","hover:bg-gray-50","focus:bg-gray-50","focus:outline-none","transition-colors","duration-150",3,"innerHTML"],[1,"w-full","px-4","py-2","text-left","hover:bg-gray-50","focus:bg-gray-50","focus:outline-none","transition-colors","duration-150",3,"click","mousedown","innerHTML"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),F(),r(3,"svg",3),m(4,"path",4),o()(),U(),r(5,"input",5),p("ngModelChange",function(c){return n.searchTerm.set(c),n.onSearchChange(c)})("focus",function(){return n.onInputFocus()})("blur",function(){return n.onInputBlur()})("keyup.enter",function(){return n.search()}),o()(),_(6,xn,3,2,"div",6)(7,Mn,2,1,"p",7),o()),t&2&&(a(5),f("ngModel",n.searchTerm()),a(),h(n.isInputFocused()&&n.searchHistory().length>0||n.suggestions().length>0&&n.searchTerm().length>=2?6:-1),a(),h(n.error()?7:-1))},dependencies:[b,ee,Se,be,tt,Ge,De],styles:["[_nghost-%COMP%]     strong{font-weight:600;color:#2563eb}"]})};var at=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-pokemon-page"]],standalone:!0,features:[M],decls:5,vars:2,consts:[["playingCard",""],[1,"w-96"],[3,"searchSubmitted","isLoading","error"],[1,"mt-8"]],template:function(t,n){if(t&1){let s=x();r(0,"div",1)(1,"app-pokemon-search",2),p("searchSubmitted",function(R){g(s);let B=St(4);return v(B.searchPokemon(R))}),o()(),r(2,"div",3),m(3,"app-playing-card",null,0),o()}if(t&2){let s=St(4);a(),f("isLoading",s.isLoading())("error",s.error())}},dependencies:[b,ot,st],encapsulation:2})};var lt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-movie-page"]],standalone:!0,features:[M],decls:14,vars:0,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mb-8","border-b","border-gray-200"],[1,"flex","-mb-px"],[1,"mr-1"],["routerLink","by-title","routerLinkActive","border-blue-500 text-blue-600",1,"inline-block","px-6","py-3","text-gray-600","hover:text-gray-800","border-b-2","border-transparent","font-medium","transition-colors"],["routerLink","by-filter","routerLinkActive","border-blue-500 text-blue-600",1,"inline-block","px-6","py-3","text-gray-600","hover:text-gray-800","border-b-2","border-transparent","font-medium","transition-colors"],[1,"bg-white","rounded-lg","shadow-sm","p-6"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Movies"),o()(),r(4,"nav",3)(5,"ul",4)(6,"li",5)(7,"a",6),l(8," Search by Title "),o()(),r(9,"li",5)(10,"a",7),l(11," Search by Filters "),o()()()(),r(12,"div",8),m(13,"router-outlet"),o()())},dependencies:[b,ve,Ke],encapsulation:2})};var ae=class i{constructor(e){this.http=e}baseUrl="https://api.themoviedb.org/3";apiKey=Je.tmdbApiKey;country="BE";getStreamingProviders(){return this.http.get(`${this.baseUrl}/watch/providers/movie?api_key=${this.apiKey}&watch_region=${this.country}`).pipe(z(e=>e.results))}getMovieAvailability(e){return this.http.get(`${this.baseUrl}/movie/${e}/watch/providers?api_key=${this.apiKey}`)}static \u0275fac=function(t){return new(t||i)(A(se))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var ct=class i{constructor(e){this.elementRef=e}clickOutside=new oe;onClick(e){this.elementRef.nativeElement.contains(e)||this.clickOutside.emit()}static \u0275fac=function(t){return new(t||i)(y(Te))};static \u0275dir=re({type:i,selectors:[["","clickOutside",""]],hostBindings:function(t,n){t&1&&p("click",function(c){return n.onClick(c.target)},!1,jt)},outputs:{clickOutside:"clickOutside"},standalone:!0})};var wn=(i,e)=>e.provider_id;function Dn(i,e){i&1&&(r(0,"div",8),m(1,"div",11),o())}function En(i,e){if(i&1&&(r(0,"div",9),l(1),o()),i&2){let t=d(2);a(),C(" ",t.error()," ")}}function Vn(i,e){if(i&1){let t=x();r(0,"label",12)(1,"input",13),p("change",function(){let s=g(t).$implicit,c=d(3);return v(c.toggleProvider(s))}),o(),m(2,"img",14),r(3,"span",4),l(4),o()()}if(i&2){let t=e.$implicit,n=d(3);a(),f("checked",n.isSelected(t.provider_id)),a(),f("src","https://image.tmdb.org/t/p/original"+t.logo_path,N)("alt",t.provider_name),a(2),w(t.provider_name)}}function kn(i,e){if(i&1&&(r(0,"div",10),V(1,Vn,5,4,"label",12,wn),o()),i&2){let t=d(2);a(),k(t.providers())}}function Fn(i,e){if(i&1){let t=x();r(0,"div",7),p("clickOutside",function(){g(t);let s=d();return v(s.isOpen.set(!1))}),_(1,Dn,2,0,"div",8)(2,En,2,1,"div",9)(3,kn,3,0,"div",10),o()}if(i&2){let t=d();a(),h(t.loading()?1:t.error()?2:3)}}var Ee=class i{providers=u([]);selectedProviders=u(new Set);isOpen=u(!1);loading=u(!1);error=u(null);selectedCount=Q(()=>this.selectedProviders().size);providersChanged=J();streamingService=O(ae);constructor(){this.loadProviders()}loadProviders(){this.loading.set(!0),this.streamingService.getStreamingProviders().subscribe({next:e=>{this.providers.set(e),this.loading.set(!1)},error:e=>{this.error.set("Failed to load streaming providers"),this.loading.set(!1)}})}toggleDropdown(){this.isOpen.update(e=>!e)}isSelected(e){return this.selectedProviders().has(e)}toggleProvider(e){let t=new Set(this.selectedProviders());t.has(e.provider_id)?t.delete(e.provider_id):t.add(e.provider_id),this.selectedProviders.set(t),this.providersChanged.emit(Array.from(t))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-streaming-selector"]],outputs:{providersChanged:"providersChanged"},standalone:!0,features:[M],decls:9,vars:6,consts:[[1,"relative","inline-block"],[1,"flex","items-center","space-x-2","px-4","py-2","border","rounded-full","bg-white","hover:bg-gray-50","transition-colors",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-500"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-lg","shadow-lg","border","p-4","z-50"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-lg","shadow-lg","border","p-4","z-50",3,"clickOutside"],[1,"flex","justify-center","py-4"],[1,"text-red-500","text-sm","text-center","py-2"],[1,"space-y-3"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-500"],[1,"flex","items-center","space-x-3","cursor-pointer","hover:bg-gray-50","p-2","rounded"],["type","checkbox",1,"rounded","border-gray-300","text-blue-600","focus:ring-blue-500",3,"change","checked"],[1,"h-6","w-6","rounded",3,"src","alt"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"button",1),p("click",function(){return n.toggleDropdown()}),F(),r(2,"svg",2),m(3,"path",3),o(),U(),r(4,"span",4),l(5,"Streaming"),o(),r(6,"span",5),l(7),o()(),_(8,Fn,4,1,"div",6),o()),t&2&&(a(),H("ring-2",n.isOpen())("ring-blue-500",n.isOpen()),a(6),C("(",n.selectedCount(),")"),a(),h(n.isOpen()?8:-1))},dependencies:[b,ct],encapsulation:2})};var Ve=class i{ratingChanged=J();onRatingChange(e){let t=e.target.value;this.ratingChanged.emit(t?+t:null)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-rating-selector"]],outputs:{ratingChanged:"ratingChanged"},standalone:!0,features:[M],decls:13,vars:0,consts:[[1,"px-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"change"],["value",""],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"]],template:function(t,n){t&1&&(r(0,"select",0),p("change",function(c){return n.onRatingChange(c)}),r(1,"option",1),l(2,"Any Rating"),o(),r(3,"option",2),l(4,"5+ Stars"),o(),r(5,"option",3),l(6,"6+ Stars"),o(),r(7,"option",4),l(8,"7+ Stars"),o(),r(9,"option",5),l(10,"8+ Stars"),o(),r(11,"option",6),l(12,"9+ Stars"),o()())},dependencies:[b],encapsulation:2})};var te=class i{constructor(e){this.http=e}authService=O(Y);markAsWatched(e,t){return this.authService.markAsWatched(e)}removeFromWatched(e,t){return this.authService.removeFromWatched(e)}getWatchedMovies(e){return this.authService.getWatchedMovies()}static \u0275fac=function(t){return new(t||i)(A(se))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var ke=class i{movieId;watchedMoviesService=O(te);authService=O(Y);isWatched=u(!1);constructor(){qe(()=>{this.authService.isAuthenticated()&&this.checkWatchedStatus()})}toggleWatched(){if(!this.authService.isAuthenticated()){console.log("not authenticated");return}console.log("toggleWatched");let e=this.authService.getSessionId();e&&(this.isWatched()?this.watchedMoviesService.removeFromWatched(this.movieId,e).subscribe({next:()=>this.isWatched.set(!1),error:t=>console.error("Error removing from watched:",t)}):this.watchedMoviesService.markAsWatched(this.movieId,e).subscribe({next:()=>this.isWatched.set(!0),error:t=>console.error("Error marking as watched:",t)}))}checkWatchedStatus(){let e=this.authService.getSessionId();e&&this.watchedMoviesService.getWatchedMovies(e).subscribe({next:t=>{let n=t.results?.some(s=>s.id===this.movieId);this.isWatched.set(n),console.log("Movie ID:",this.movieId,"Is Watched:",n,"Response:",t)},error:t=>console.error("Error checking watched status:",t)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-watched-button"]],inputs:{movieId:"movieId"},standalone:!0,features:[M],decls:5,vars:11,consts:[[1,"flex","items-center","space-x-2","px-4","py-2","rounded-full","transition-colors",3,"click","disabled"],[1,"material-icons","text-sm"]],template:function(t,n){t&1&&(r(0,"button",0),p("click",function(){return n.toggleWatched()}),r(1,"span",1),l(2),o(),r(3,"span"),l(4),o()()),t&2&&(H("bg-green-500",n.isWatched())("text-white",n.isWatched())("bg-gray-100",!n.isWatched())("hover:bg-gray-200",!n.isWatched()),f("disabled",!n.authService.isAuthenticated()),a(2),C(" ",n.isWatched()?"check_circle":"radio_button_unchecked"," "),a(2),w(n.isWatched()?"Watched":"Mark as watched"))},dependencies:[b],encapsulation:2})};var ue=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(ue||{});function $e(i,e){return{type:ue.Trigger,name:i,definitions:e,options:{}}}function pe(i,e=null){return{type:ue.Animate,styles:e,timings:i}}function ie(i){return{type:ue.Style,styles:i,offset:null}}function me(i,e,t=null){return{type:ue.Transition,expr:i,animation:e,options:t}}function Ci(i,e,t=null){return{type:ue.Query,selector:i,animation:e,options:t}}function bi(i,e){return{type:ue.Stagger,timings:i,animation:e}}var We=class i{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:return this.sanitizer.bypassSecurityTrustUrl(e)}}static \u0275fac=function(t){return new(t||i)(y(Kt,16))};static \u0275pipe=ze({name:"safe",type:i,pure:!0,standalone:!0})};var le=class i{constructor(e){this.http=e}baseUrl="https://api.themoviedb.org/3";apiKey=Je.tmdbApiKey;getMovie(e){return this.http.get(`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&append_to_response=videos`).pipe(X(t=>t.status===404?K(()=>new Error("Movie not found")):K(()=>new Error("An error occurred while fetching movie data"))))}getMovieDetails(e){return this.http.get(`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&append_to_response=credits,reviews,similar,videos`).pipe(X(t=>t.status===404?K(()=>new Error("Movie details not found")):K(()=>new Error("An error occurred while fetching movie details"))))}searchMovies(e,t){let n=`${this.baseUrl}/search/movie?api_key=${this.apiKey}&query=${encodeURIComponent(e)}`;t&&t.length>0&&(n+=`&watch_region=BE&with_watch_providers=${t.join("|")}`);let R=[1,2,3,4,5].map(B=>this.http.get(`${n}&page=${B}`).pipe(z(I=>I.results)));return ne(R).pipe(z(B=>{let I=B.flat();console.log("Before sorting:",I.map(W=>({title:W.title,vote_count:W.vote_count})));let $=I.sort((W,gt)=>(console.log(`Comparing ${W.title}(${W.vote_count}) with ${gt.title}(${gt.vote_count})`),(gt.vote_count||0)-(W.vote_count||0)));return console.log("After sorting:",$.map(W=>({title:W.title,vote_count:W.vote_count}))),$}),X(()=>K(()=>new Error("Error searching movies"))))}getPopularMovies(){return this.http.get(`${this.baseUrl}/movie/popular?api_key=${this.apiKey}`).pipe(z(e=>e.results),X(()=>K(()=>new Error("Error fetching popular movies"))))}discoverMovies(e){let t=T({api_key:this.apiKey,watch_region:"BE",with_watch_providers:"netflix",sort_by:"popularity.desc"},e),s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26].map(c=>this.http.get(`${this.baseUrl}/discover/movie`,{params:L(T({},t),{page:c})}).pipe(z(R=>R.results)));return ne(s).pipe(z(c=>{let R=c.flat();console.log("Before sorting:",R.map(I=>({title:I.title,vote_count:I.vote_count})));let B=R.sort((I,$)=>(console.log(`Comparing ${I.title}(${I.vote_count}) with ${$.title}(${$.vote_count})`),($.vote_count||0)-(I.vote_count||0)));return console.log("After sorting:",B.map(I=>({title:I.title,vote_count:I.vote_count}))),B}),X(()=>K(()=>new Error("Error discovering movies"))))}static \u0275fac=function(t){return new(t||i)(A(se))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var Pt=(i,e)=>e.provider_id,An=(i,e)=>e.id,In=(i,e)=>e==null?null:e.id;function Tn(i,e){if(i&1&&(r(0,"div",1),m(1,"img",16)(2,"div",17),o()),i&2){let t=d();a(),f("src","https://image.tmdb.org/t/p/original"+t.backdrop_path,N)("alt",t.title)}}function On(i,e){if(i&1&&(r(0,"div",20),m(1,"img",21),r(2,"span",22),l(3),o()()),i&2){let t=e.$implicit;a(),f("src","https://image.tmdb.org/t/p/original"+t.logo_path,N)("alt",t.provider_name),a(2),w(t.provider_name)}}function Nn(i,e){if(i&1&&(r(0,"div")(1,"p",19),l(2,"Stream"),o(),r(3,"div",13),V(4,On,4,3,"div",20,Pt),o()()),i&2){let t=d();a(4),k(t.flatrate)}}function Rn(i,e){if(i&1&&(r(0,"div",23),m(1,"img",21),r(2,"span",22),l(3),o()()),i&2){let t=e.$implicit;a(),f("src","https://image.tmdb.org/t/p/original"+t.logo_path,N)("alt",t.provider_name),a(2),w(t.provider_name)}}function Hn(i,e){if(i&1&&(r(0,"div")(1,"p",19),l(2,"Rent"),o(),r(3,"div",13),V(4,Rn,4,3,"div",23,Pt),o()()),i&2){let t=d();a(4),k(t.rent)}}function jn(i,e){if(i&1&&(r(0,"div",24),m(1,"img",21),r(2,"span",22),l(3),o()()),i&2){let t=e.$implicit;a(),f("src","https://image.tmdb.org/t/p/original"+t.logo_path,N)("alt",t.provider_name),a(2),w(t.provider_name)}}function Bn(i,e){if(i&1&&(r(0,"div")(1,"p",19),l(2,"Buy"),o(),r(3,"div",13),V(4,jn,4,3,"div",24,Pt),o()()),i&2){let t=d();a(4),k(t.buy)}}function Ln(i,e){if(i&1&&(r(0,"div",8)(1,"h3",18),l(2,"Where to Watch"),o(),_(3,Nn,6,0,"div")(4,Hn,6,0,"div")(5,Bn,6,0,"div"),o()),i&2){let t=e;a(3),h(t.flatrate.length>0?3:-1),a(),h(t.rent.length>0?4:-1),a(),h(t.buy.length>0?5:-1)}}function Un(i,e){i&1&&(r(0,"p",9),l(1,"No streaming providers available"),o())}function Gn(i,e){if(i&1&&(r(0,"span",25),l(1),o()),i&2){let t=e.$implicit;a(),C(" ",t.name," ")}}function $n(i,e){if(i&1&&(r(0,"div",13),V(1,Gn,2,1,"span",25,An),o()),i&2){let t=d();a(),k(t.genres)}}function Wn(i,e){if(i&1&&m(0,"img",29),i&2){let t=d().$implicit;f("src","https://image.tmdb.org/t/p/w45"+t.profile_path,N)("alt",t.name)}}function zn(i,e){if(i&1&&(r(0,"div",30)(1,"span",34),l(2),o()()),i&2){let t=d().$implicit;a(2),w(t.name[0])}}function qn(i,e){if(i&1&&(r(0,"div",28),_(1,Wn,1,2,"img",29)(2,zn,3,1,"div",30),r(3,"div",31)(4,"p",32),l(5),o(),r(6,"p",33),l(7),o()()()),i&2){let t=e.$implicit;a(),h(t.profile_path?1:2),a(4),w(t.name),a(2),C(" ",t.character," ")}}function Yn(i,e){if(i&1&&(r(0,"div")(1,"h3",26),l(2,"Top Cast"),o(),r(3,"div",27),V(4,qn,8,3,"div",28,In),o()()),i&2){let t=d();a(4),k(t.credits==null||t.credits.cast==null?null:t.credits.cast.slice(0,6))}}function Kn(i,e){if(i&1&&(r(0,"div")(1,"h3",26),l(2,"Official Trailer"),o(),r(3,"div",35),m(4,"iframe",36),E(5,"safe"),o()()),i&2){let t=d(2);a(4),f("src",q(5,1,t.getYouTubeEmbedUrl(e.key),"resourceUrl"),Ht)}}function Jn(i,e){if(i&1&&(r(0,"div",0),_(1,Tn,3,2,"div",1),r(2,"div",2)(3,"div",3)(4,"div",4),m(5,"img",5),r(6,"div",6),m(7,"app-watched-button",7),o(),_(8,Ln,6,3,"div",8)(9,Un,2,0,"p",9),o(),r(10,"div",10)(11,"h2",11),l(12),o(),r(13,"p",12),l(14),o(),_(15,$n,3,0,"div",13),r(16,"div",14)(17,"div")(18,"p",9),l(19,"Release Date"),o(),r(20,"p",15),l(21),E(22,"date"),o()(),r(23,"div")(24,"p",9),l(25,"Rating"),o(),r(26,"p",15),l(27),E(28,"number"),o()(),r(29,"div")(30,"p",9),l(31,"Vote Count"),o(),r(32,"p",15),l(33),o()(),r(34,"div")(35,"p",9),l(36,"Language"),o(),r(37,"p",15),l(38),E(39,"uppercase"),o()()(),_(40,Yn,6,0,"div")(41,Kn,6,4,"div"),o()()()()),i&2){let t,n,s=e,c=d();a(),h(s.backdrop_path?1:-1),a(4),f("src","https://image.tmdb.org/t/p/w500"+s.poster_path,N)("alt",s.title),a(2),f("movieId",c.movieId),a(),h((t=c.providers())?8:9,t),a(4),w(s.title),a(2),w(s.overview),a(),h(s.genres!=null&&s.genres.length?15:-1),a(6),w(j(22,14,s.release_date)),a(6),C(" ",q(28,16,s.vote_average,"1.1-1"),"/10 "),a(6),w(s.vote_count),a(5),C(" ",j(39,19,s.original_language)," "),a(2),h(!(s.credits==null||s.credits.cast==null)&&s.credits.cast.length?40:-1),a(),h((n=c.getOfficialTrailer(s))?41:-1,n)}}var dt=class i{constructor(e,t){this.movieService=e;this.streamingService=t}movieId;close=new oe;movie=u(null);providers=u({flatrate:[],free:[],buy:[],rent:[]});ngOnInit(){this.loadMovieDetails()}loadMovieDetails(){ne({movieDetails:this.movieService.getMovieDetails(this.movieId),providers:this.streamingService.getMovieAvailability(this.movieId)}).subscribe({next:({movieDetails:e,providers:t})=>{this.movie.set(e),this.providers.set({flatrate:t?.results?.BE?.flatrate||[],free:t?.results?.BE?.free||[],buy:t?.results?.BE?.buy||[],rent:t?.results?.BE?.rent||[]})},error:e=>console.error("Error loading movie details:",e)})}getOfficialTrailer(e){if(!e.videos?.results)return null;let t=e.videos.results.find(n=>n.type==="Trailer"&&n.official&&n.site==="YouTube");return t||e.videos.results.find(n=>n.type==="Trailer"&&n.site==="YouTube")||null}getYouTubeEmbedUrl(e){return`https://www.youtube.com/embed/${e}`}static \u0275fac=function(t){return new(t||i)(y(le),y(ae))};static \u0275cmp=S({type:i,selectors:[["app-movie-card"]],inputs:{movieId:"movieId"},outputs:{close:"close"},standalone:!0,features:[Re([b,We]),M],decls:1,vars:1,consts:[[1,"w-full"],[1,"relative","w-full","h-[400px]","mb-8"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"md:w-1/3","lg:w-1/4","flex-shrink-0","space-y-6"],[1,"w-full","rounded-lg","shadow-lg",3,"src","alt"],[1,"mt-4"],[3,"movieId"],[1,"space-y-4"],[1,"text-sm","text-gray-500"],[1,"flex-1","space-y-6"],[1,"text-3xl","font-bold"],[1,"text-gray-600","text-lg"],[1,"flex","flex-wrap","gap-2"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],[1,"font-medium"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-white","to-transparent"],[1,"text-xl","font-semibold"],[1,"text-sm","text-gray-500","mb-2"],[1,"flex","items-center","bg-blue-50","rounded-full","px-4","py-2"],[1,"w-6","h-6","rounded-full",3,"src","alt"],[1,"ml-2","text-sm","font-medium"],[1,"flex","items-center","bg-orange-50","rounded-full","px-4","py-2"],[1,"flex","items-center","bg-purple-50","rounded-full","px-4","py-2"],[1,"px-4","py-1.5","bg-gray-100","rounded-full","text-sm","font-medium"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"flex","items-center","gap-3","p-2","rounded-lg","bg-gray-50"],[1,"w-12","h-12","rounded-full","object-cover",3,"src","alt"],[1,"w-12","h-12","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate"],[1,"text-sm","text-gray-500","truncate"],[1,"text-gray-500","text-lg"],[1,"aspect-video"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"w-full","h-full","rounded-lg",3,"src"]],template:function(t,n){if(t&1&&_(0,Jn,42,21,"div",0),t&2){let s;h((s=n.movie())?0:-1,s)}},dependencies:[b,zt,Ye,ge,We,ke],encapsulation:2,data:{animation:[$e("cardContent",[me(":enter",[Ci(".animate-item",[ie({opacity:0,transform:"translateY(10px)"}),bi(50,[pe("300ms ease-out",ie({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var ce=class i{constructor(e){this.streamingService=e}#e=u([]);#t=u({});selectedProviders=this.#e.asReadonly();movieStreamingProviders=this.#t.asReadonly();updateSelectedProviders(e){this.#e.set(e)}loadStreamingProvidersForMovies(e){e.length&&ne(e.map(t=>this.streamingService.getMovieAvailability(t.id).pipe(z(n=>({movieId:t.id,providers:n?.results?.BE?.flatrate||[]})),X(()=>Ot({movieId:t.id,providers:[]}))))).subscribe({next:t=>{let n={};t.forEach(({movieId:s,providers:c})=>{n[s]=c}),this.#t.set(n)}})}static \u0275fac=function(t){return new(t||i)(A(ae))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var Fe=class i{#e=u([]);searchHistory=this.#e.asReadonly();addToSearchHistory(e){this.#e().some(t=>t.id===e.id)||this.#e.update(t=>[e,...t].slice(0,5))}clearHistory(){this.#e.set([])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var Pe=class i{constructor(e,t,n,s,c){this.movieService=e;this.streamingProviderStore=t;this.searchHistoryStore=n;this.WatchedMoviesService=s;this.AuthService=c}#e=u(!1);#t=u(null);#n=u([]);#i=u([]);#a=u("");#r=u(null);#o=u(null);#s=u("all");selectedProviders=u([]);loading=this.#e.asReadonly();error=this.#t.asReadonly();movies=Q(()=>this.applyFilters(this.#n()));suggestions=this.#i.asReadonly();searchTerm=this.#a.asReadonly();selectedMovie=this.#o.asReadonly();watchedFilter=this.#s.asReadonly();applyFilters(e){let t=[...e];this.#r()!==null&&(t=this.filterMoviesByRating(t));let n=this.#s();if(n!=="all"){let c=this.AuthService.getSessionId();if(!c)return t;let R=this.WatchedMoviesService.getWatchedMovies(c).subscribe({next:B=>{let I=new Set(B.results.map($=>$.id));t=t.filter($=>{let W=I.has($.id);return n==="watched"?W:!W})},error:B=>(console.error("Error loading watched movies:",B),t)})}let s=this.selectedProviders();if(s.length>0){let c=this.streamingProviderStore.movieStreamingProviders();t=t.filter(R=>{let B=c[R.id]||[];return s.some(I=>B.some($=>$.provider_id===I))})}return t}setWatchedFilter(e){this.#s.set(e)}filterMoviesByRating(e){let t=this.#r();return t===null?e:e.filter(n=>n.vote_average>=t)}updateSearchTerm(e){this.#a.set(e)}setSelectedMovie(e){this.#o.set(e),e&&(this.searchHistoryStore.addToSearchHistory(e),this.loadMovieDetails(e.id))}loadMovieDetails(e){this.movieService.getMovie(e).subscribe({next:t=>this.#o.set(L(T({},t),{videos:[]})),error:t=>{console.error("Error loading movie details:",t),this.#t.set("Error loading movie details")}})}setRatingThreshold(e){this.#r.set(e),this.refreshResults()}refreshResults(){let e=this.searchTerm();e.length>=2&&this.searchMovies(e)}searchMovies(e){if(e.length<2){this.clearResults();return}this.#e.set(!0),this.#t.set(null),this.movieService.searchMovies(e).subscribe({next:t=>{let n=this.filterMoviesByRating(t.map(s=>L(T({},s),{videos:[]})));this.#n.set(n),this.#i.set(n.slice(0,10)),this.streamingProviderStore.loadStreamingProvidersForMovies(n),this.#e.set(!1)},error:t=>this.handleError(t)})}handleError(e){console.error("Search error:",e),this.#i.set([]),this.#n.set([]),this.#e.set(!1),this.#t.set(`API Error: ${e.message}`)}clearResults(){this.#n.set([]),this.#i.set([]),this.#t.set(null)}updateSelectedProviders(e){this.selectedProviders.set(e)}closeMovieDetails(){this.setSelectedMovie(null)}static \u0275fac=function(t){return new(t||i)(A(le),A(ce),A(Fe),A(te),A(Y))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zn=(i,e)=>e.id;function Qn(i,e){if(i&1&&m(0,"app-watched-button",9),i&2){let t=d().$implicit;f("movieId",t.id)}}function er(i,e){if(i&1){let t=x();r(0,"div",14)(1,"button",17),p("click",function(){g(t);let s=d().$implicit,c=d();return v(c.toggleWatched(s))}),F(),r(2,"svg",18),m(3,"path",19)(4,"path",19),o()(),U(),r(5,"button",17),p("click",function(){g(t);let s=d().$implicit,c=d();return v(c.toggleFavorite(s))}),F(),r(6,"svg",18),m(7,"path",20),o()()()}if(i&2){let t=d().$implicit,n=d();a(),H("text-green-600",n.watchedMovies().has(t.id))("text-gray-400",!n.watchedMovies().has(t.id)),fe("aria-label",n.watchedMovies().has(t.id)?"Remove from watched":"Mark as watched"),a(2),H("hidden",!n.watchedMovies().has(t.id)),fe("fill",n.watchedMovies().has(t.id)?"currentColor":"none"),a(),H("hidden",n.watchedMovies().has(t.id)),a(),H("text-red-600",n.favoriteMovies().has(t.id))("text-gray-400",!n.favoriteMovies().has(t.id)),fe("aria-label",n.favoriteMovies().has(t.id)?"Remove from favorites":"Add to favorites"),a(2),fe("fill",n.favoriteMovies().has(t.id)?"currentColor":"none")}}function tr(i,e){if(i&1){let t=x();r(0,"div",5)(1,"div",7),m(2,"img",8),_(3,Qn,1,1,"app-watched-button",9),o(),r(4,"div",10)(5,"h3",11),l(6),o(),r(7,"p",12),l(8),E(9,"date"),o(),r(10,"div",13)(11,"span",3),l(12),E(13,"number"),o(),_(14,er,8,16,"div",14),o(),r(15,"div",15)(16,"button",16),p("click",function(){let s=g(t).$implicit,c=d();return v(c.openMovieDetails(s))}),l(17," View Details "),o()()()()}if(i&2){let t=e.$implicit,n=d();a(2),f("src","https://image.tmdb.org/t/p/w500"+t.poster_path,N)("alt",t.title),a(),h(n.authService.isAuthenticated()?3:-1),a(3),w(t.title),a(2),C(" ",q(9,7,t.release_date,"yyyy")," "),a(4),C(" Rating: ",q(13,10,t.vote_average,"1.1-1")," "),a(2),h(n.authService.isAuthenticated()?14:-1)}}function ir(i,e){if(i&1){let t=x();r(0,"div",21),p("click",function(){g(t);let s=d();return v(s.closeMovieDetails())}),r(1,"div",22),p("click",function(s){return g(t),v(s.stopPropagation())}),r(2,"div",23)(3,"h3",24),l(4,"Movie Details"),o(),r(5,"button",25),p("click",function(){g(t);let s=d();return v(s.closeMovieDetails())}),F(),r(6,"svg",26),m(7,"path",27),o()()(),U(),r(8,"div",28)(9,"app-movie-card",29),p("close",function(){g(t);let s=d();return v(s.closeMovieDetails())}),o()()()()}if(i&2){let t=d();a(9),f("movieId",t.searchStore.selectedMovie().id)}}var Ae=class i{constructor(e,t){this.authService=e;this.searchStore=t;this.initializeMovieStates()}movies=Z.required();favoriteMovies=u(new Set);watchedMovies=u(new Set);watchedMoviesService=O(te);initializeMovieStates(){qe(()=>{if(!this.authService.isAuthenticated()){this.resetStates();return}this.loadFavoriteMovies(),this.loadWatchedMovies()})}resetStates(){this.watchedMovies.set(new Set),this.favoriteMovies.set(new Set)}loadWatchedMovies(){let e=this.authService.getSessionId();e&&this.watchedMoviesService.getWatchedMovies(e).subscribe({next:t=>{this.watchedMovies.set(new Set(t.map(n=>n.id)))},error:t=>console.error("Failed to load watched movies:",t)})}loadFavoriteMovies(){this.authService.getFavoriteMovies().subscribe({next:e=>{this.favoriteMovies.set(new Set(e.map(t=>t.id)))},error:e=>console.error("Failed to load favorites:",e)})}toggleWatched(e){let t=this.authService.getSessionId();if(!t)return;let n=this.watchedMovies().has(e.id);(n?this.watchedMoviesService.removeFromWatched(e.id,t):this.watchedMoviesService.markAsWatched(e.id,t)).subscribe({next:()=>this.updateWatchedMovies(e.id,!n),error:c=>console.error("Failed to toggle watched status:",c)})}updateWatchedMovies(e,t){let n=new Set(this.watchedMovies());t?n.add(e):n.delete(e),this.watchedMovies.set(n)}toggleFavorite(e){if(!this.authService.isAuthenticated())return;let t=this.favoriteMovies().has(e.id);(t?this.authService.removeFromFavorites(e.id):this.authService.addToFavorites(e.id)).subscribe({next:()=>this.updateFavoriteMovies(e.id,!t),error:s=>console.error("Failed to update favorites:",s)})}updateFavoriteMovies(e,t){let n=new Set(this.favoriteMovies());t?n.add(e):n.delete(e),this.favoriteMovies.set(n)}openMovieDetails(e){this.searchStore.setSelectedMovie(e),this.setBodyOverflow("hidden")}closeMovieDetails(){this.searchStore.closeMovieDetails(),this.setBodyOverflow("auto")}setBodyOverflow(e){document.body.style.overflow=e}static \u0275fac=function(t){return new(t||i)(y(Y),y(Pe))};static \u0275cmp=S({type:i,selectors:[["app-movie-search-results"]],inputs:{movies:[1,"movies"]},standalone:!0,features:[M],decls:11,vars:2,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","flex","flex-col"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"relative"],[1,"w-full","h-64","object-cover",3,"src","alt"],[3,"movieId"],[1,"p-4","flex","flex-col","flex-grow"],[1,"font-semibold","text-lg","mb-2"],[1,"text-gray-600","text-sm","mb-2"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","gap-2"],[1,"mt-auto"],[1,"w-full","py-2","px-4","bg-blue-500","hover:bg-blue-600","text-white","rounded-md","transition-colors","duration-200",3,"click"],[1,"p-2","rounded-full","hover:bg-gray-100","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"w-6","h-6"],["d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","w-full","max-h-[90vh]","overflow-y-auto","m-4",3,"click"],[1,"p-4","flex","justify-between","items-center","border-b"],[1,"text-xl","font-semibold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4"],[3,"close","movieId"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),l(4,"Search Results"),o(),r(5,"p",3),l(6),o()()(),r(7,"div",4),V(8,tr,18,13,"div",5,Zn),o(),_(10,ir,10,1,"div",6),o()),t&2&&(a(6),C(" Found ",n.movies().length," movies "),a(2),k(n.movies()),a(2),h(n.searchStore.selectedMovie()?10:-1))},dependencies:[b,Ye,ge,dt,ke],encapsulation:2,data:{animation:[$e("modalAnimation",[me(":enter",[ie({opacity:0}),pe("2000ms ease-out",ie({opacity:1}))]),me(":leave",[pe("2000ms ease-in",ie({opacity:0}))])]),$e("modalContent",[me(":enter",[ie({transform:"scale(0.95)",opacity:0}),pe("200ms ease-out",ie({transform:"scale(1)",opacity:1}))]),me(":leave",[pe("200ms ease-in",ie({transform:"scale(0.95)",opacity:0}))])])]}})};var Mi=(i,e)=>e.id;function nr(i,e){if(i&1){let t=x();r(0,"li",17),p("click",function(){let s=g(t).$implicit,c=d(3);return v(c.selectMovie(s))}),m(1,"span",18),E(2,"titlecase"),E(3,"highlight"),r(4,"span",19),l(5),E(6,"date"),o()()}if(i&2){let t=e.$implicit,n=d(3);a(),f("innerHTML",q(3,4,j(2,2,t.title),n.searchStore.searchTerm()),Oe),a(4),C("(",q(6,7,t.release_date,"yyyy"),")")}}function rr(i,e){if(i&1&&(r(0,"div",13)(1,"div",15),l(2,"Suggestions"),o(),r(3,"ul"),V(4,nr,7,10,"li",16,Mi),o()()),i&2){let t=d(2);a(4),k(t.searchStore.suggestions())}}function or(i,e){if(i&1){let t=x();r(0,"button",22),p("click",function(){let s=g(t).$implicit,c=d(3);return v(c.selectMovie(s))}),l(1),o()}if(i&2){let t=e.$implicit;a(),C(" ",t.title," ")}}function sr(i,e){if(i&1&&(r(0,"div",14)(1,"div",15),l(2,"Recent searches"),o(),r(3,"div",20),V(4,or,2,1,"button",21,Mi),o()()),i&2){let t=d(2);a(4),k(t.searchHistoryStore.searchHistory())}}function ar(i,e){if(i&1&&(r(0,"div",10),_(1,rr,6,0,"div",13)(2,sr,6,0,"div",14),o()),i&2){let t=d();a(),h(t.searchStore.suggestions().length>0?1:-1),a(),h(t.searchHistoryStore.searchHistory().length>0?2:-1)}}function lr(i,e){if(i&1&&(r(0,"p",11),l(1),o()),i&2){let t=d();a(),w(t.searchStore.error())}}function cr(i,e){if(i&1&&m(0,"app-movie-search-results",12),i&2){let t=d();f("movies",t.searchStore.movies())}}var ut=class i{constructor(e,t){this.searchStore=e;this.searchHistoryStore=t}isLoading=Z(!1);error=Z(void 0);searchSubmitted=J();isInputFocused=u(!1);maxSuggestions=10;ngOnInit(){this.searchStore.clearResults()}onSearchTermChange(e){this.searchStore.updateSearchTerm(e),this.searchStore.searchMovies(e)}onInputBlur(){setTimeout(()=>{this.isInputFocused.set(!1)},200)}onProvidersChanged(e){this.searchStore.updateSelectedProviders(e)}selectMovie(e){console.log("Selecting movie:",e),this.searchStore.setSelectedMovie(e),this.searchStore.searchMovies(e.title),this.isInputFocused.set(!1),this.searchSubmitted.emit(e)}search(){let e=this.searchStore.searchTerm();e.length>=2&&(this.searchStore.searchMovies(e),this.isInputFocused.set(!1))}onRatingChange(e){let t=e.target.value;this.searchStore.setRatingThreshold(t?+t:null)}static \u0275fac=function(t){return new(t||i)(y(Pe),y(Fe))};static \u0275cmp=S({type:i,selectors:[["app-movie-search"]],inputs:{isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{searchSubmitted:"searchSubmitted"},standalone:!0,features:[M],decls:13,vars:4,consts:[[1,"relative","w-full"],[1,"relative"],[1,"relative","flex","items-center","gap-4"],[1,"relative","flex-1"],[1,"absolute","inset-y-0","left-5","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search movies",1,"w-full","pl-14","pr-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"ngModelChange","focus","blur","keyup.enter","ngModel"],[3,"ratingChanged"],[3,"providersChanged"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"text-red-500","text-sm","mt-2"],[3,"movies"],[1,"p-3"],[1,"p-3","border-t","border-gray-100"],[1,"text-xs","text-gray-500","mb-2"],[1,"px-3","py-2","hover:bg-gray-100","cursor-pointer","rounded"],[1,"px-3","py-2","hover:bg-gray-100","cursor-pointer","rounded",3,"click"],[3,"innerHTML"],[1,"text-sm","text-gray-500"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","rounded-full"],[1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","rounded-full",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),F(),r(5,"svg",5),m(6,"path",6),o()(),U(),r(7,"input",7),p("ngModelChange",function(c){return n.onSearchTermChange(c)})("focus",function(){return n.isInputFocused.set(!0)})("blur",function(){return n.onInputBlur()})("keyup.enter",function(){return n.search()}),o()(),r(8,"app-rating-selector",8),p("ratingChanged",function(c){return n.searchStore.setRatingThreshold(c)}),o(),r(9,"app-streaming-selector",9),p("providersChanged",function(c){return n.onProvidersChanged(c)}),o()(),_(10,ar,3,2,"div",10)(11,lr,2,1,"p",11)(12,cr,1,1,"app-movie-search-results",12),o()()),t&2&&(a(7),f("ngModel",n.searchStore.searchTerm()),a(3),h(n.isInputFocused()&&(n.searchStore.suggestions().length>0||n.searchHistoryStore.searchHistory().length>0)?10:-1),a(),h(n.searchStore.error()?11:-1),a(),h(n.searchStore.movies().length>0?12:-1))},dependencies:[b,ee,ge,Se,be,tt,Ge,De,Ee,Ve,Ae],encapsulation:2})};var pt=class i{constructor(e,t){this.movieService=e;this.streamingProviderStore=t}#e=u(!1);#t=u(null);#n=u([]);#i=u(null);loading=this.#e.asReadonly();error=this.#t.asReadonly();movies=this.#n.asReadonly();ratingThreshold=this.#i.asReadonly();discoverMovies(){this.#e.set(!0),this.#t.set(null);let e={with_watch_providers:this.streamingProviderStore.selectedProviders().join("|"),"vote_average.gte":this.#i()};this.movieService.discoverMovies(e).subscribe({next:t=>{let n=this.filterMoviesByRating(t);this.#n.set(n),this.streamingProviderStore.loadStreamingProvidersForMovies(n),this.#e.set(!1)},error:t=>this.handleError(t)})}setRatingThreshold(e){this.#i.set(e),this.discoverMovies()}filterMoviesByRating(e){return this.#i()===null?e:e.filter(t=>t.vote_average>=this.#i())}handleError(e){console.error("Discover error:",e),this.#n.set([]),this.#e.set(!1),this.#t.set(`API Error: ${e.message}`)}clearResults(){this.#n.set([]),this.#t.set(null)}static \u0275fac=function(t){return new(t||i)(A(le),A(ce))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};function ur(i,e){if(i&1&&(r(0,"p",10),l(1),o()),i&2){let t=d();a(),w(t.discoverStore.error())}}function pr(i,e){if(i&1&&m(0,"app-movie-search-results",11),i&2){let t=d();f("movies",t.filteredMovies())}}var mt=class i{constructor(e,t){this.discoverStore=e;this.streamingProviderStore=t;this.loadWatchedMovies()}watchedFilter=u("all");watchedMoviesService=O(te);authService=O(Y);watchedMovieIds=u(new Set);loadWatchedMovies(){if(!this.authService.isAuthenticated())return;let e=this.authService.getSessionId();e&&this.watchedMoviesService.getWatchedMovies(e).subscribe({next:t=>{this.watchedMovieIds.set(new Set(t.map(n=>n.id)))},error:t=>console.error("Failed to load watched movies:",t)})}filteredMovies=Q(()=>{let e=this.discoverStore.movies(),t=this.watchedFilter(),n=this.watchedMovieIds();switch(t){case"watched":return e.filter(s=>n.has(s.id));case"unwatched":return e.filter(s=>!n.has(s.id));default:return e}});onWatchedFilterChange(e){let t=e.target.value;this.watchedFilter.set(t)}ngOnInit(){this.discoverStore.clearResults()}onProvidersChanged(e){this.streamingProviderStore.updateSelectedProviders(e),this.discoverStore.discoverMovies()}search(){this.discoverStore.discoverMovies()}static \u0275fac=function(t){return new(t||i)(y(pt),y(ce))};static \u0275cmp=S({type:i,selectors:[["app-movie-filter"]],standalone:!0,features:[M],decls:16,vars:2,consts:[[1,"relative","w-full"],[1,"relative"],[1,"relative","flex","items-center","gap-4"],[3,"ratingChanged"],[3,"providersChanged"],[1,"px-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"change"],["value","all"],["value","unwatched"],["value","watched"],[1,"px-6","py-3","bg-blue-500","text-white","rounded-full","hover:bg-blue-600","transition-colors",3,"click"],[1,"text-red-500","text-sm","mt-2"],[3,"movies"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-rating-selector",3),p("ratingChanged",function(c){return n.discoverStore.setRatingThreshold(c)}),o(),r(4,"app-streaming-selector",4),p("providersChanged",function(c){return n.onProvidersChanged(c)}),o(),r(5,"select",5),p("change",function(c){return n.onWatchedFilterChange(c)}),r(6,"option",6),l(7,"All Movies"),o(),r(8,"option",7),l(9,"Unwatched Only"),o(),r(10,"option",8),l(11,"Watched Only"),o()(),r(12,"button",9),p("click",function(){return n.search()}),l(13," Search Movies "),o()(),_(14,ur,2,1,"p",10)(15,pr,1,1,"app-movie-search-results",11),o()()),t&2&&(a(14),h(n.discoverStore.error()?14:-1),a(),h(n.discoverStore.movies().length>0?15:-1))},dependencies:[b,Ee,Ve,Ae],encapsulation:2})};var wi=[{path:"",component:lt,children:[{path:"by-title",component:ut},{path:"by-filter",component:mt},{path:"",redirectTo:"by-title",pathMatch:"full"}]}];var Di=[{path:"",redirectTo:"pokemon",pathMatch:"full"},{path:"pokemon",component:at,title:"Pokemon Cards"},{path:"movies",loadChildren:()=>wi},{path:"profile",loadComponent:()=>import("./chunk-PRVWFXWM.js").then(i=>i.ProfilePageComponent),title:"Profile"},{path:"preferences",loadComponent:()=>import("./chunk-52IUI36D.js").then(i=>i.PreferencesPageComponent),title:"Preferences"},{path:"login",loadComponent:()=>import("./chunk-2G4FENMW.js").then(i=>i.LoginPageComponent),title:"Login"},{path:"auth/callback",loadComponent:()=>import("./chunk-57G5Z3LG.js").then(i=>i.AuthCallbackComponent),title:"Authenticating..."}];var Ei={providers:[Gt({eventCoalescing:!0}),Jt(Di),qt()]};var Ie=class i{isNavOpen=u(!0);toggleNav(){this.isNavOpen.update(e=>!e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};function mr(i,e){if(i&1){let t=x();r(0,"div",26)(1,"a",27)(2,"span",28),l(3,"person"),o(),l(4," Profile "),o(),r(5,"a",29)(6,"span",28),l(7,"settings"),o(),l(8," Preferences "),o(),r(9,"button",30),p("click",function(){g(t);let s=d(2);return v(s.signOut())}),r(10,"span",28),l(11,"logout"),o(),l(12," Sign out "),o()()}}function hr(i,e){if(i&1){let t=x();r(0,"div",18)(1,"button",21),p("click",function(){g(t);let s=d();return v(s.toggleUserMenu())}),r(2,"div",22)(3,"span",23),l(4),o()(),r(5,"span",24),l(6),o(),r(7,"span",25),l(8),o()(),_(9,mr,13,0,"div",26),o()}if(i&2){let t=d();a(4),w(t.getUserInitials()),a(2),w(t.userName()),a(2),C(" ",t.isUserMenuOpen()?"expand_less":"expand_more"," "),a(),h(t.isUserMenuOpen()?9:-1)}}function fr(i,e){i&1&&(r(0,"a",19)(1,"span",31),l(2,"login"),o(),r(3,"span"),l(4,"Log in"),o()())}function gr(i,e){if(i&1){let t=x();r(0,"div",32),p("click",function(){g(t);let s=d();return v(s.navigationService.toggleNav())}),o()}}var ht=class i{navigationService=O(Ie);isUserMenuOpen=u(!1);isAuthenticated=u(!1);userName=u("John Doe");toggleUserMenu(){this.isUserMenuOpen.update(e=>!e)}getUserInitials(){return this.userName().split(" ").map(e=>e[0]).join("").toUpperCase()}signOut(){this.isAuthenticated.set(!1),this.isUserMenuOpen.set(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-nav"]],standalone:!0,features:[M],decls:24,vars:6,consts:[[1,"fixed","left-0","top-0","h-full","w-64","bg-[#6366F1]","text-white","p-4","transition-transform","duration-300","z-20"],[1,"flex","flex-col","h-full"],[1,"mb-8"],["width","32","height","32","viewBox","0 0 32 32","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","16","cy","16","r","15","fill","#3B82F6"],["x","8","y","10","width","16","height","12","fill","white","opacity","0.9"],["x","10","y","12","width","2","height","2","fill","#3B82F6"],["x","10","y","18","width","2","height","2","fill","#3B82F6"],["x","20","y","12","width","2","height","2","fill","#3B82F6"],["x","20","y","18","width","2","height","2","fill","#3B82F6"],["cx","14","cy","16","r","3","stroke","white","stroke-width","2","fill","none"],["d","M16.5 18.5L19.5 21.5","stroke","white","stroke-width","2","stroke-linecap","round"],["d","M20 14C21.5 14 22.5 15 23 16","stroke","white","stroke-width","1.5","stroke-linecap","round","fill","none"],["d","M20 16C21 16 21.5 16.5 22 17","stroke","white","stroke-width","1.5","stroke-linecap","round","fill","none"],[1,"space-y-4","flex-grow"],["routerLink","/movies","routerLinkActive","bg-white/20",1,"flex","items-center","space-x-3","px-4","py-2","rounded-lg","hover:bg-white/10"],[1,"material-icons"],[1,"mt-auto"],[1,"relative"],["routerLink","/login",1,"flex","items-center","px-4","py-2","rounded-lg","hover:bg-white/10"],[1,"lg:hidden","fixed","inset-0","bg-black","bg-opacity-50","z-10"],[1,"w-full","flex","items-center","px-4","py-2","rounded-lg","hover:bg-white/10",3,"click"],[1,"h-8","w-8","rounded-full","bg-white/20","flex","items-center","justify-center","mr-3"],[1,"text-sm","font-medium"],[1,"flex-grow","text-left"],[1,"material-icons","text-sm"],[1,"absolute","bottom-full","left-0","w-full","mb-2","bg-white","rounded-lg","shadow-lg","overflow-hidden"],["routerLink","/profile",1,"block","px-4","py-2","text-gray-700","hover:bg-gray-100"],[1,"material-icons","text-sm","mr-2"],["routerLink","/preferences",1,"block","px-4","py-2","text-gray-700","hover:bg-gray-100"],[1,"w-full","px-4","py-2","text-left","text-gray-700","hover:bg-gray-100",3,"click"],[1,"material-icons","mr-3"],[1,"lg:hidden","fixed","inset-0","bg-black","bg-opacity-50","z-10",3,"click"]],template:function(t,n){t&1&&(r(0,"nav",0)(1,"div",1)(2,"div",2),F(),r(3,"svg",3),m(4,"circle",4)(5,"rect",5)(6,"rect",6)(7,"rect",7)(8,"rect",8)(9,"rect",9)(10,"circle",10)(11,"path",11)(12,"path",12)(13,"path",13),o()(),U(),r(14,"div",14)(15,"a",15)(16,"span",16),l(17,"movie"),o(),r(18,"span"),l(19,"Movies"),o()()(),r(20,"div",17),_(21,hr,10,4,"div",18)(22,fr,5,0,"a",19),o()()(),_(23,gr,1,0,"div",20)),t&2&&(H("translate-x-0",n.navigationService.isNavOpen())("-translate-x-full",!n.navigationService.isNavOpen()),a(21),h(n.isAuthenticated()?21:22),a(2),h(n.navigationService.isNavOpen()?23:-1))},dependencies:[b,ve],encapsulation:2})};function vr(i,e){i&1&&(F(),r(0,"svg",5),m(1,"path",12),o())}function _r(i,e){i&1&&(F(),r(0,"svg",5),m(1,"path",13),o())}function yr(i,e){if(i&1){let t=x();r(0,"div",19)(1,"a",20),l(2," Your Profile "),o(),r(3,"a",21),l(4," Preferences "),o(),r(5,"button",22),p("click",function(){g(t);let s=d(2);return v(s.signOut())}),l(6," Sign out "),o()()}}function Cr(i,e){if(i&1){let t=x();r(0,"div",9)(1,"button",14),p("click",function(){g(t);let s=d();return v(s.toggleUserMenu())}),m(2,"img",15),r(3,"span",16),l(4),o(),F(),r(5,"svg",17),m(6,"path",18),o()(),_(7,yr,7,0,"div",19),o()}if(i&2){let t,n=d();a(2),f("src",n.authService.getUserAvatar(),N),a(2),C(" ",(t=n.authService.currentUser())==null?null:t.username," "),a(3),h(n.isUserMenuOpen()?7:-1)}}function br(i,e){if(i&1){let t=x();r(0,"button",23),p("click",function(){g(t);let s=d();return v(s.authService.login())}),l(1," Log in "),o()}}var ft=class i{authService=O(Y);isUserMenuOpen=u(!1);navigationService=O(Ie);toggleUserMenu(){this.isUserMenuOpen.update(e=>!e)}signOut(){this.isUserMenuOpen.set(!1),this.authService.logout()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-root"]],standalone:!0,features:[M],decls:16,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"transition-all","duration-300"],[1,"bg-white","border-b","px-8","py-4"],[1,"flex","items-center","justify-between"],[1,"p-2","hover:bg-gray-100","rounded-full","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-500"],[1,"flex","items-center","space-x-4"],[1,"p-2","hover:bg-gray-100","rounded-full"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"relative"],[1,"text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","px-4","py-2"],[1,"p-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex","items-center","space-x-2","hover:bg-gray-100","rounded-lg","p-2",3,"click"],["alt","Profile",1,"h-8","w-8","rounded-full",3,"src"],[1,"text-sm","font-medium","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","py-1"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["routerLink","/preferences",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","px-4","py-2",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-nav"),r(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),p("click",function(){return n.navigationService.toggleNav()}),_(6,vr,2,0,":svg:svg",5)(7,_r,2,0,":svg:svg",5),o(),r(8,"div",6)(9,"button",7),F(),r(10,"svg",5),m(11,"path",8),o()(),_(12,Cr,8,3,"div",9)(13,br,2,0,"button",10),o()()(),U(),r(14,"main",11),m(15,"router-outlet"),o()()()),t&2&&(a(2),H("ml-64",n.navigationService.isNavOpen())("ml-0",!n.navigationService.isNavOpen()),a(4),h(n.navigationService.isNavOpen()?6:7),a(6),h(n.authService.isAuthenticated()?12:13))},dependencies:[b,Ke,ve,ht],encapsulation:2})};Yt(ft,Ei).catch(i=>console.error(i));
