import{a as _t,c as Y,d as Le,e as Ht,f as S,g as pe,h as jt,i as Lt,j as Bt,l as Be,n as me,o as Ut,p as Ue,q as Ge}from"./chunk-GT7FDX3S.js";import{$a as gt,Ab as Nt,Cb as Rt,Db as ie,Eb as se,Fa as Ee,Ga as $,Ia as Ft,Ka as a,La as v,M as pt,N as F,Na as ft,O as mt,Pa as u,Q as ue,Qa as ke,S as T,T as Q,Ua as x,V as y,W as ht,Wa as C,X as ee,Xa as At,Y as je,Ya as B,Za as It,_a as g,a as E,ab as k,b as I,ba as kt,bb as P,ca as h,cb as r,da as f,db as o,ea as D,eb as m,fa as R,fb as _,ga as Pt,i as Dt,ib as p,jb as c,ka as te,kb as vt,l as Vt,lb as l,m as Et,mb as A,n as U,na as G,nb as M,oa as q,ob as Pe,pa as Ve,pb as b,q as L,qb as V,rb as H,sb as Z,ub as Tt,v as X,x as W,yb as Ot}from"./chunk-QG44NDR4.js";var Jt=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(v(ft),v(Ve))}}static{this.\u0275dir=ee({type:i})}}return i})(),Ci=(()=>{class i extends Jt{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Pt(i)))(s||i)}})()}static{this.\u0275dir=ee({type:i,features:[ke]})}}return i})(),Xt=new ue("");var bi={provide:Xt,useExisting:pt(()=>ve),multi:!0};function Si(){let i=_t()?_t().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var xi=new ue(""),ve=(()=>{class i extends Jt{constructor(t,n,s){super(t,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Si())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(v(ft),v(Ve),v(xi,8))}}static{this.\u0275dir=ee({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,s){n&1&&p("input",function(O){return s._handleInput(O.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(O){return s._compositionEnd(O.target.value)})},features:[Pe([bi]),ke]})}}return i})();var Mi=new ue(""),wi=new ue("");function Zt(i){return i!=null}function Qt(i){return Tt(i)?Vt(i):i}function ei(i){let e={};return i.forEach(t=>{e=t!=null?E(E({},e),t):e}),Object.keys(e).length===0?null:e}function ti(i,e){return e.map(t=>t(i))}function Di(i){return!i.validate}function ii(i){return i.map(e=>Di(e)?e:t=>e.validate(t))}function Vi(i){if(!i)return null;let e=i.filter(Zt);return e.length==0?null:function(t){return ei(ti(t,e))}}function ni(i){return i!=null?Vi(ii(i)):null}function Ei(i){if(!i)return null;let e=i.filter(Zt);return e.length==0?null:function(t){let n=ti(t,e).map(Qt);return X(n).pipe(L(ei))}}function ri(i){return i!=null?Ei(ii(i)):null}function Gt(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function ki(i){return i._rawValidators}function Pi(i){return i._rawAsyncValidators}function yt(i){return i?Array.isArray(i)?i:[i]:[]}function ze(i,e){return Array.isArray(i)?i.includes(e):i===e}function $t(i,e){let t=yt(e);return yt(i).forEach(s=>{ze(t,s)||t.push(s)}),t}function zt(i,e){return yt(e).filter(t=>!ze(i,t))}var We=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ni(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ri(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ct=class extends We{get formDirective(){return null}get path(){return null}},Oe=class extends We{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bt=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Fi={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pr=I(E({},Fi),{"[class.ng-submitted]":"isSubmitted"}),Ye=(()=>{class i extends bt{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(v(Oe,2))}}static{this.\u0275dir=ee({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,s){n&2&&B("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ke]})}}return i})();var Fe="VALID",$e="INVALID",he="PENDING",Ae="DISABLED",ge=class{},qe=class extends ge{constructor(e,t){super(),this.value=e,this.source=t}},Ie=class extends ge{constructor(e,t){super(),this.pristine=e,this.source=t}},Te=class extends ge{constructor(e,t){super(),this.touched=e,this.source=t}},fe=class extends ge{constructor(e,t){super(),this.status=e,this.source=t}};function Ai(i){return(Ke(i)?i.validators:i)||null}function Ii(i){return Array.isArray(i)?ni(i):i||null}function Ti(i,e){return(Ke(e)?e.asyncValidators:i)||null}function Oi(i){return Array.isArray(i)?ri(i):i||null}function Ke(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var St=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ie(()=>this.statusReactive()),this.statusReactive=u(void 0),this._pristine=ie(()=>this.pristineReactive()),this.pristineReactive=u(!0),this._touched=ie(()=>this.touchedReactive()),this.touchedReactive=u(!1),this._events=new Dt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return se(this.statusReactive)}set status(e){se(()=>this.statusReactive.set(e))}get valid(){return this.status===Fe}get invalid(){return this.status===$e}get pending(){return this.status==he}get disabled(){return this.status===Ae}get enabled(){return this.status!==Ae}get pristine(){return se(this.pristineReactive)}set pristine(e){se(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return se(this.touchedReactive)}set touched(e){se(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($t(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($t(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zt(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zt(e,this._rawAsyncValidators))}hasValidator(e){return ze(this._rawValidators,e)}hasAsyncValidator(e){return ze(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(I(E({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Te(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Te(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(I(E({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Ie(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Ie(!0,n))}markAsPending(e={}){this.status=he;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fe(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(I(E({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ae,this.errors=null,this._forEachChild(s=>{s.disable(I(E({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qe(this.value,n)),this._events.next(new fe(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(I(E({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fe,this._forEachChild(n=>{n.enable(I(E({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(I(E({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fe||this.status===he)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qe(this.value,t)),this._events.next(new fe(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(I(E({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ae:Fe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=he,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=Qt(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,s)=>n&&n._find(s),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new fe(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new te,this.statusChanges=new te}_calculateStatus(){return this._allControlsDisabled()?Ae:this.errors?$e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(he)?he:this._anyControlsHaveStatus($e)?$e:Fe}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),s=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),s&&this._events.next(new Ie(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Te(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ke(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ii(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Oi(this._rawAsyncValidators)}};var oi=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>xt}),xt="always";function Ni(i,e){return[...e.path,i]}function Ri(i,e,t=xt){ji(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Li(i,e),Ui(i,e),Bi(i,e),Hi(i,e)}function Wt(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hi(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function ji(i,e){let t=ki(i);e.validator!==null?i.setValidators(Gt(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=Pi(i);e.asyncValidator!==null?i.setAsyncValidators(Gt(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let s=()=>i.updateValueAndValidity();Wt(e._rawValidators,s),Wt(e._rawAsyncValidators,s)}function Li(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&si(i,e)})}function Bi(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&si(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function si(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ui(i,e){let t=(n,s)=>{e.valueAccessor.writeValue(n),s&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function Gi(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $i(i){return Object.getPrototypeOf(i.constructor)===Ci}function zi(i,e){if(!e)return null;Array.isArray(e);let t,n,s;return e.forEach(d=>{d.constructor===ve?t=d:$i(d)?n=d:s=d}),s||n||t||null}function qt(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function Yt(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Wi=class extends St{constructor(e=null,t,n){super(Ai(t),Ti(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ke(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Yt(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yt(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var qi={provide:Oe,useExisting:pt(()=>Ne)},Kt=Promise.resolve(),Ne=(()=>{class i extends Oe{constructor(t,n,s,d,O,z){super(),this._changeDetectorRef=O,this.callSetDisabledState=z,this.control=new Wi,this._registered=!1,this.name="",this.update=new te,this._parent=t,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=zi(this,d)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Gi(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ri(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Kt.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,s=n!==0&&Rt(n);Kt.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ni(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(v(Ct,9),v(Mi,10),v(wi,10),v(Xt,10),v(Nt,8),v(oi,8))}}static{this.\u0275dir=ee({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Pe([qi]),ke,kt]})}}return i})();var Yi=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ht({type:i})}static{this.\u0275inj=mt({})}}return i})();var _e=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:oi,useValue:t.callSetDisabledState??xt}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ht({type:i})}static{this.\u0275inj=mt({imports:[Yi]})}}return i})();var Je={normal:{bg:"bg-gray-100",text:"text-gray-800"},fire:{bg:"bg-red-100",text:"text-red-800"},water:{bg:"bg-blue-100",text:"text-blue-800"},electric:{bg:"bg-yellow-100",text:"text-yellow-800"},grass:{bg:"bg-green-100",text:"text-green-800"},ice:{bg:"bg-cyan-100",text:"text-cyan-800"},fighting:{bg:"bg-orange-100",text:"text-orange-800"},poison:{bg:"bg-purple-100",text:"text-purple-800"},ground:{bg:"bg-amber-100",text:"text-amber-800"},flying:{bg:"bg-indigo-100",text:"text-indigo-800"},psychic:{bg:"bg-pink-100",text:"text-pink-800"},bug:{bg:"bg-lime-100",text:"text-lime-800"},rock:{bg:"bg-stone-100",text:"text-stone-800"},ghost:{bg:"bg-violet-100",text:"text-violet-800"},dragon:{bg:"bg-teal-100",text:"text-teal-800"},dark:{bg:"bg-zinc-100",text:"text-zinc-800"},steel:{bg:"bg-slate-100",text:"text-slate-800"},fairy:{bg:"bg-rose-100",text:"text-rose-800"}},li=255,ci=5;var Ki=(i,e)=>e.type.name;function Ji(i,e){if(i&1&&(r(0,"span",2),l(1),V(2,"titlecase"),o()),i&2){let t=e.$implicit,n=c();It(n.getTypeClasses(t.type.name)),a(),M(" ",H(2,3,t.type.name)," ")}}var ye=class i{types=[];getTypeClasses(e){let t=Je[e];return`${t.bg} ${t.text}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-pokemon-types"]],inputs:{types:"types"},standalone:!0,features:[b],decls:3,vars:0,consts:[[1,"flex","gap-2"],[1,"px-3","py-1","rounded-full","text-sm",3,"class"],[1,"px-3","py-1","rounded-full","text-sm"]],template:function(t,n){t&1&&(r(0,"div",0),k(1,Ji,3,5,"span",1,Ki),o()),t&2&&(a(),P(n.types))},dependencies:[S,Y],encapsulation:2})};var Xi=(i,e)=>e.name;function Zi(i,e){if(i&1){let t=_();r(0,"tr",7)(1,"td",8)(2,"div",9),l(3),V(4,"titlecase"),o()(),r(5,"td",8),m(6,"img",10),o(),r(7,"td",8),m(8,"app-pokemon-types",11),o(),r(9,"td",12)(10,"div",13)(11,"button",14),p("click",function(){let s=h(t).$implicit,d=c();return f(d.reloadPokemon(s))}),D(),r(12,"svg",15),m(13,"path",16),o()(),R(),r(14,"button",17),p("click",function(){let s=h(t).$implicit,d=c();return f(d.deletePokemon(s))}),D(),r(15,"svg",15),m(16,"path",18),o()()()()()}if(i&2){let t=e.$implicit;a(3),M(" ",H(4,4,t.name)," "),a(3),C("src",t.sprites.front_default,$)("alt",t.name),a(2),C("types",t.types)}}var Xe=class i{searchHistory=q([]);deleteEntry=G();reloadEntry=G();deletePokemon(e){this.deleteEntry.emit(e)}reloadPokemon(e){this.reloadEntry.emit(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-pokemon-history-table"]],inputs:{searchHistory:[1,"searchHistory"]},outputs:{deleteEntry:"deleteEntry",reloadEntry:"reloadEntry"},standalone:!0,features:[b],decls:17,vars:0,consts:[[1,"mt-8"],[1,"text-xl","font-semibold","mb-4"],[1,"w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"h-12","w-12",3,"src","alt"],[3,"types"],[1,"px-6","py-4","whitespace-nowrap","text-right"],[1,"flex","justify-end","space-x-2"],["title","Reload Pokemon",1,"text-blue-600","hover:text-blue-900","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Delete from history",1,"text-red-600","hover:text-red-900","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"h2",1),l(2,"Recent Pokemon Searches"),o(),r(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),l(7," Pokemon "),o(),r(8,"th",4),l(9," Sprite "),o(),r(10,"th",4),l(11," Types "),o(),r(12,"th",5),l(13," Actions "),o()()(),r(14,"tbody",6),k(15,Zi,17,6,"tr",7,Xi),o()()()),t&2&&(a(15),P(n.searchHistory()))},dependencies:[S,Y,ye],encapsulation:2})};var Ce=class i{constructor(e){this.http=e;this.loadPokemonList()}apiUrl="https://pokeapi.co/api/v2/pokemon/";pokemonList=[];maxPokemonSuggestions=5;loadPokemonList(){this.http.get(`${this.apiUrl}?limit=100000&offset=0`).subscribe({next:e=>{this.pokemonList=e.results.map(t=>t.name)},error:e=>console.error("Error loading Pokemon list:",e)})}getPokemon(e){return this.http.get(`${this.apiUrl}${e.toLowerCase()}`).pipe(W(t=>t.status===404?U(()=>new Error("Pokemon not found")):U(()=>new Error("An error occurred while fetching Pokemon data"))))}filterPokemon(e){let t=e.toLowerCase();return this.pokemonList.filter(n=>n.startsWith(t)).slice(0,this.maxPokemonSuggestions)}static \u0275fac=function(t){return new(t||i)(T(pe))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qi=(i,e)=>e.stat.name,en=(i,e)=>e.ability.name,tn=(i,e)=>e.move.name;function nn(i,e){if(i&1){let t=_();r(0,"button",15),p("click",function(){h(t);let s=c(2);return f(s.closeCard())}),D(),r(1,"svg",16),m(2,"path",17),o()()}}function rn(i,e){if(i&1&&(r(0,"div",28)(1,"div",34)(2,"span"),l(3),V(4,"titlecase"),o(),r(5,"span",35),l(6),o()(),r(7,"div",36),m(8,"div",37),o()()),i&2){let t=e.$implicit;a(3),M("",H(4,4,t.stat.name),":"),a(3),A(t.base_stat),a(2),At("width",t.base_stat/255*100,"%")}}function on(i,e){if(i&1&&(r(0,"span",31),l(1),V(2,"titlecase"),o()),i&2){let t=e.$implicit;a(),M(" ",H(2,1,t.ability.name)," ")}}function sn(i,e){if(i&1&&(r(0,"span",31),l(1),V(2,"titlecase"),o()),i&2){let t=e.$implicit;a(),M(" ",H(2,1,t.move.name)," ")}}function an(i,e){if(i&1){let t=_();r(0,"div",6)(1,"div",18)(2,"h2",19),l(3),V(4,"titlecase"),o(),r(5,"div",20)(6,"img",21),p("click",function(){h(t);let s=c(2);return f(s.toggleSprite())}),o(),r(7,"img",21),p("click",function(){h(t);let s=c(2);return f(s.toggleSprite())}),o(),r(8,"p",22),l(9),o()()(),r(10,"div",23)(11,"div",24)(12,"h3",25),l(13,"Types"),o(),m(14,"app-pokemon-types",26),o(),r(15,"div",24)(16,"h3",25),l(17,"Base Stats"),o(),r(18,"div",27),k(19,rn,9,6,"div",28,Qi),o()(),r(21,"div",29)(22,"h3",25),l(23,"Abilities"),o(),r(24,"div",30),k(25,on,3,3,"span",31,en),o()(),r(27,"div",29)(28,"h3",25),l(29,"Moves (First 5)"),o(),r(30,"div",30),k(31,sn,3,3,"span",31,tn),o()(),r(33,"div",32)(34,"div",33)(35,"span"),l(36),o(),r(37,"span"),l(38),o()()()()()}if(i&2){let t=c(2);a(3),M(" ",H(4,9,t.pokemonData().name)," "),a(3),C("src",t.getSpriteSrc("front"),$)("alt",t.pokemonData().name+" front"),a(),C("src",t.getSpriteSrc("back"),$)("alt",t.pokemonData().name+" back"),a(2),M(" Click to toggle ",t.currentSprite()==="default"?"shiny":"normal"," sprite "),a(5),C("types",t.pokemonData().types),a(5),P(t.pokemonData().base_stats),a(6),P(t.pokemonData().abilities),a(6),P(t.pokemonData().moves.slice(0,5)),a(5),M("Height: ",t.pokemonData().height/10,"m"),a(2),M("Weight: ",t.pokemonData().weight/10,"kg")}}function ln(i,e){i&1&&(r(0,"div",13),m(1,"div",38),r(2,"p",39),l(3,"Loading Pokemon data..."),o()())}function cn(i,e){if(i&1){let t=_();r(0,"div",14)(1,"p"),l(2),o(),r(3,"button",40),p("click",function(){h(t);let s=c(2);return f(s.loadPokemon())}),l(4," Retry "),o()()}if(i&2){let t=c(2);a(2),A(t.error())}}function dn(i,e){if(i&1){let t=_();r(0,"div",4),p("click",function(s){h(t);let d=c();return f(d.handleBackdropClick(s))}),m(1,"div",5),r(2,"div",6)(3,"div",7),x(4,nn,3,0,"button",8),r(5,"div",9)(6,"div",10)(7,"div",11),x(8,an,39,11,"div",6),o(),r(9,"div",12),x(10,ln,4,0,"div",13)(11,cn,5,1,"div",14),o()()()()()()}if(i&2){let t=c();a(4),g(t.pokemonData()&&!t.isLoading()?4:-1),a(2),B("flipped",t.isFlipped()),a(2),g(t.pokemonData()&&!t.isLoading()?8:-1),a(2),g(t.isLoading()?10:-1),a(),g(t.error()?11:-1)}}var Ze=class i{constructor(e){this.pokemonService=e}MAX_HISTORY=5;STORAGE_KEY="pokemon-history";POKEMON_TYPE_COLORS=Je;MAX_STAT_VALUE=li;DISPLAYED_MOVES_COUNT=ci;pokemonData=u(void 0);isLoading=u(!1);error=u(void 0);currentSprite=u("default");pokemonName="";searchTerm=u("");searchHistory=u([]);isFlipped=u(!1);isVisible=u(!1);ngOnInit(){this.loadSearchHistory()}loadSearchHistory(){let e=localStorage.getItem(this.STORAGE_KEY);e&&this.searchHistory.set(JSON.parse(e))}searchPokemon(e){this.pokemonName=e,this.loadPokemon()}loadPokemon(){this.isLoading.set(!0),this.error.set(void 0),this.isFlipped.set(!0),this.pokemonService.getPokemon(this.pokemonName).subscribe({next:e=>{setTimeout(()=>{this.pokemonData.set(e),this.updateSearchHistory(e),this.isLoading.set(!1),this.isFlipped.set(!1),this.isVisible.set(!0)},300)},error:e=>{this.error.set("Pokemon not found. Please try another name."),this.isLoading.set(!1),this.isFlipped.set(!1),this.isVisible.set(!1),console.error("Error loading Pokemon:",e)}})}updateSearchHistory(e){let t=this.searchHistory();this.searchHistory.set([e,...t.filter(n=>n.name!==e.name)].slice(0,this.MAX_HISTORY)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}toggleSprite(){this.currentSprite.set(this.currentSprite()==="default"?"shiny":"default")}getSpriteSrc(e){return this.pokemonData()?.sprites?this.currentSprite()==="shiny"?e==="front"?this.pokemonData()?.sprites.other.showdown.front_shiny||"":this.pokemonData()?.sprites.other.showdown.back_shiny||"":e==="front"?this.pokemonData()?.sprites.front_default||"":this.pokemonData()?.sprites.back_default||"":""}handleDeletePokemon(e){this.searchHistory.set(this.searchHistory().filter(t=>t.name!==e.name)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}closeCard(){this.isVisible.set(!1),this.pokemonData.set(void 0),this.searchTerm.set("")}handleBackdropClick(e){e.target.classList.contains("fixed")&&this.closeCard()}static \u0275fac=function(t){return new(t||i)(v(Ce))};static \u0275cmp=y({type:i,selectors:[["app-playing-card"]],standalone:!0,features:[b],decls:4,vars:2,consts:[[1,"flex","flex-col","items-center","min-h-[400px]","w-full"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"w-full"],[3,"deleteEntry","reloadEntry","searchHistory"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","transition-opacity","modal-backdrop"],[1,"flex","h-full"],[1,"w-full","max-w-5xl","mx-auto","card-container","relative","bg-white","shadow-xl","modal-content"],[1,"absolute","right-4","top-4","z-20","bg-white","rounded-full","p-1.5","shadow-lg","hover:bg-gray-100","transition-colors","duration-200"],[1,"h-full","overflow-y-auto"],[1,"card"],[1,"card-face","front"],[1,"card-face","back"],[1,"bg-white","rounded-xl","shadow-lg","p-8","text-center"],[1,"bg-white","rounded-xl","shadow-lg","p-8","text-center","text-red-600"],[1,"absolute","right-4","top-4","z-20","bg-white","rounded-full","p-1.5","shadow-lg","hover:bg-gray-100","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"w-1/3","p-6","bg-gray-50","border-r","border-gray-200"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"flex","flex-col","items-center","space-y-4"],[1,"w-48","h-48","cursor-pointer",3,"click","src","alt"],[1,"text-center","text-sm","text-gray-600"],[1,"w-2/3","p-6"],[1,"mb-6"],[1,"font-semibold","mb-2"],[3,"types"],[1,"space-y-2"],[1,"text-sm"],[1,"mt-6"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","bg-gray-100","rounded-full","text-sm"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"flex","justify-between","text-sm","text-gray-600"],[1,"flex","justify-between"],[1,"font-medium"],[1,"w-full","bg-gray-200","rounded-full","h-1.5"],[1,"bg-blue-600","h-1.5","rounded-full"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-gray-900","mx-auto"],[1,"mt-4"],[1,"mt-4","px-4","py-2","bg-blue-500","text-white","rounded","hover:bg-blue-600",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0),x(1,dn,12,6,"div",1),r(2,"div",2)(3,"app-pokemon-history-table",3),p("deleteEntry",function(d){return n.handleDeletePokemon(d)})("reloadEntry",function(d){return n.searchPokemon(d.name)}),o()()()),t&2&&(a(),g(n.isVisible()?1:-1),a(2),C("searchHistory",n.searchHistory()))},dependencies:[S,Y,_e,ye,Xe],styles:["[_nghost-%COMP%]{display:block;padding:1rem}.pokemon-card[_ngcontent-%COMP%]{transition:all .3s ease}.pokemon-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-bar[_ngcontent-%COMP%]{transition:width .5s ease-out}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.loading-shimmer[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 2s infinite linear;background:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-size:1000px 100%}.modal-backdrop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.card-container[_ngcontent-%COMP%]{perspective:1000px;height:100vh}"]})};var be=class i{transform(e,t){if(!t)return e;let n=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s=new RegExp(n,"gi");return e.replace(s,d=>`<strong>${d}</strong>`)}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=je({name:"highlight",type:i,pure:!0,standalone:!0})};function un(i,e){if(i&1){let t=_();r(0,"button",13),V(1,"titlecase"),V(2,"highlight"),p("click",function(){let s=h(t).$implicit,d=c(3);return f(d.selectSuggestion(s))})("mousedown",function(s){return h(t),f(s.preventDefault())}),o()}if(i&2){let t=e.$implicit,n=c(3);C("innerHTML",Z(2,3,H(1,1,t),n.searchTerm()),Ee)}}function pn(i,e){if(i&1&&(r(0,"div",8)(1,"div",10),l(2,"Recent searches"),o(),r(3,"div",11),k(4,un,3,6,"button",12,gt),o()()),i&2){let t=c(2);a(4),P(t.searchHistory())}}function mn(i,e){if(i&1){let t=_();r(0,"button",15),V(1,"titlecase"),V(2,"highlight"),p("click",function(){let s=h(t).$implicit,d=c(3);return f(d.selectSuggestion(s))})("mousedown",function(s){return h(t),f(s.preventDefault())}),o()}if(i&2){let t=e.$implicit,n=c(3);C("innerHTML",Z(2,3,H(1,1,t),n.searchTerm()),Ee)}}function hn(i,e){if(i&1&&(r(0,"div",9),k(1,mn,3,6,"button",14,gt),o()),i&2){let t=c(2);a(),P(t.suggestions())}}function fn(i,e){if(i&1&&(r(0,"div",6),x(1,pn,6,0,"div",8)(2,hn,3,0,"div",9),o()),i&2){let t=c();a(),g(t.searchHistory().length>0?1:-1),a(),g(t.suggestions().length>0&&t.searchTerm().length>=2?2:-1)}}function gn(i,e){if(i&1&&(r(0,"p",7),l(1),o()),i&2){let t=c();a(),A(t.error())}}var Qe=class i{constructor(e){this.pokemonService=e;this.loadSearchHistory()}isLoading=q(!1);error=q(void 0);searchSubmitted=G();searchTerm=u("");suggestions=u([]);searchHistory=u([]);isInputFocused=u(!1);MAX_HISTORY=8;STORAGE_KEY="pokemon-search-history";loadSearchHistory(){let e=localStorage.getItem(this.STORAGE_KEY);this.searchHistory.set(e?JSON.parse(e):[])}saveSearchHistory(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.searchHistory()))}onInputFocus(){this.isInputFocused.set(!0)}onInputBlur(){setTimeout(()=>{this.isInputFocused.set(!1)},200)}onSearchChange(e){e.length>=2?this.suggestions.set(this.pokemonService.filterPokemon(e)):this.suggestions.set([])}selectSuggestion(e){this.searchTerm.set(e),this.suggestions.set([]),this.search()}search(){if(!this.searchTerm().trim())return;let e=this.searchTerm().toLowerCase();this.searchHistory.set([e,...this.searchHistory().filter(t=>t!==e)].slice(0,this.MAX_HISTORY)),this.saveSearchHistory(),this.suggestions.set([]),this.searchSubmitted.emit(e)}static \u0275fac=function(t){return new(t||i)(v(Ce))};static \u0275cmp=y({type:i,selectors:[["app-pokemon-search"]],inputs:{isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{searchSubmitted:"searchSubmitted"},standalone:!0,features:[b],decls:8,vars:3,consts:[[1,"relative","w-full"],[1,"relative","flex","items-center"],[1,"absolute","left-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search a pokemon",1,"w-full","pl-12","pr-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"ngModelChange","focus","blur","keyup.enter","ngModel"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","overflow-auto"],[1,"text-red-500","text-sm","mt-2"],[1,"p-3"],[1,"border-t","border-gray-100"],[1,"text-xs","text-gray-500","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","bg-gray-100","hover:bg-gray-200","rounded-full","text-sm","transition-colors","duration-150",3,"innerHTML"],[1,"px-3","py-1","bg-gray-100","hover:bg-gray-200","rounded-full","text-sm","transition-colors","duration-150",3,"click","mousedown","innerHTML"],[1,"w-full","px-4","py-2","text-left","hover:bg-gray-50","focus:bg-gray-50","focus:outline-none","transition-colors","duration-150",3,"innerHTML"],[1,"w-full","px-4","py-2","text-left","hover:bg-gray-50","focus:bg-gray-50","focus:outline-none","transition-colors","duration-150",3,"click","mousedown","innerHTML"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),D(),r(3,"svg",3),m(4,"path",4),o()(),R(),r(5,"input",5),p("ngModelChange",function(d){return n.searchTerm.set(d),n.onSearchChange(d)})("focus",function(){return n.onInputFocus()})("blur",function(){return n.onInputBlur()})("keyup.enter",function(){return n.search()}),o()(),x(6,fn,3,2,"div",6)(7,gn,2,1,"p",7),o()),t&2&&(a(5),C("ngModel",n.searchTerm()),a(),g(n.isInputFocused()&&n.searchHistory().length>0||n.suggestions().length>0&&n.searchTerm().length>=2?6:-1),a(),g(n.error()?7:-1))},dependencies:[S,Y,_e,ve,Ye,Ne,be],styles:["[_nghost-%COMP%]     strong{font-weight:600;color:#2563eb}"]})};var et=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-pokemon-page"]],standalone:!0,features:[b],decls:5,vars:2,consts:[["playingCard",""],[1,"w-96"],[3,"searchSubmitted","isLoading","error"],[1,"mt-8"]],template:function(t,n){if(t&1){let s=_();r(0,"div",1)(1,"app-pokemon-search",2),p("searchSubmitted",function(O){h(s);let z=vt(4);return f(z.searchPokemon(O))}),o()(),r(2,"div",3),m(3,"app-playing-card",null,0),o()}if(t&2){let s=vt(4);a(),C("isLoading",s.isLoading())("error",s.error())}},dependencies:[S,Ze,Qe],encapsulation:2})};var tt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-movie-page"]],standalone:!0,features:[b],decls:14,vars:0,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mb-8","border-b","border-gray-200"],[1,"flex","-mb-px"],[1,"mr-1"],["routerLink","by-title","routerLinkActive","border-blue-500 text-blue-600",1,"inline-block","px-6","py-3","text-gray-600","hover:text-gray-800","border-b-2","border-transparent","font-medium","transition-colors"],["routerLink","by-filter","routerLinkActive","border-blue-500 text-blue-600",1,"inline-block","px-6","py-3","text-gray-600","hover:text-gray-800","border-b-2","border-transparent","font-medium","transition-colors"],[1,"bg-white","rounded-lg","shadow-sm","p-6"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Movies"),o()(),r(4,"nav",3)(5,"ul",4)(6,"li",5)(7,"a",6),l(8," Search by Title "),o()(),r(9,"li",5)(10,"a",7),l(11," Search by Filters "),o()()()(),r(12,"div",8),m(13,"router-outlet"),o()())},dependencies:[S,me,Be],encapsulation:2})};var ne=class i{constructor(e){this.http=e}baseUrl="https://api.themoviedb.org/3";apiKey=Ue.tmdbApiKey;country="BE";getStreamingProviders(){return this.http.get(`${this.baseUrl}/watch/providers/movie?api_key=${this.apiKey}&watch_region=${this.country}`).pipe(L(e=>e.results))}getMovieAvailability(e){return this.http.get(`${this.baseUrl}/movie/${e}/watch/providers?api_key=${this.apiKey}`)}static \u0275fac=function(t){return new(t||i)(T(pe))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var it=class i{constructor(e){this.elementRef=e}clickOutside=new te;onClick(e){this.elementRef.nativeElement.contains(e)||this.clickOutside.emit()}static \u0275fac=function(t){return new(t||i)(v(Ve))};static \u0275dir=ee({type:i,selectors:[["","clickOutside",""]],hostBindings:function(t,n){t&1&&p("click",function(d){return n.onClick(d.target)},!1,Ft)},outputs:{clickOutside:"clickOutside"},standalone:!0})};var vn=(i,e)=>e.provider_id;function _n(i,e){i&1&&(r(0,"div",8),m(1,"div",11),o())}function yn(i,e){if(i&1&&(r(0,"div",9),l(1),o()),i&2){let t=c(2);a(),M(" ",t.error()," ")}}function Cn(i,e){if(i&1){let t=_();r(0,"label",12)(1,"input",13),p("change",function(){let s=h(t).$implicit,d=c(3);return f(d.toggleProvider(s))}),o(),m(2,"img",14),r(3,"span",4),l(4),o()()}if(i&2){let t=e.$implicit,n=c(3);a(),C("checked",n.isSelected(t.provider_id)),a(),C("src","https://image.tmdb.org/t/p/original"+t.logo_path,$)("alt",t.provider_name),a(2),A(t.provider_name)}}function bn(i,e){if(i&1&&(r(0,"div",10),k(1,Cn,5,4,"label",12,vn),o()),i&2){let t=c(2);a(),P(t.providers())}}function Sn(i,e){if(i&1){let t=_();r(0,"div",7),p("clickOutside",function(){h(t);let s=c();return f(s.isOpen.set(!1))}),x(1,_n,2,0,"div",8)(2,yn,2,1,"div",9)(3,bn,3,0,"div",10),o()}if(i&2){let t=c();a(),g(t.loading()?1:t.error()?2:3)}}var Se=class i{providers=u([]);selectedProviders=u(new Set);isOpen=u(!1);loading=u(!1);error=u(null);selectedCount=ie(()=>this.selectedProviders().size);providersChanged=G();streamingService=Q(ne);constructor(){this.loadProviders()}loadProviders(){this.loading.set(!0),this.streamingService.getStreamingProviders().subscribe({next:e=>{this.providers.set(e),this.loading.set(!1)},error:e=>{this.error.set("Failed to load streaming providers"),this.loading.set(!1)}})}toggleDropdown(){this.isOpen.update(e=>!e)}isSelected(e){return this.selectedProviders().has(e)}toggleProvider(e){let t=new Set(this.selectedProviders());t.has(e.provider_id)?t.delete(e.provider_id):t.add(e.provider_id),this.selectedProviders.set(t),this.providersChanged.emit(Array.from(t))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-streaming-selector"]],outputs:{providersChanged:"providersChanged"},standalone:!0,features:[b],decls:9,vars:6,consts:[[1,"relative","inline-block"],[1,"flex","items-center","space-x-2","px-4","py-2","border","rounded-full","bg-white","hover:bg-gray-50","transition-colors",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-500"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-lg","shadow-lg","border","p-4","z-50"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-lg","shadow-lg","border","p-4","z-50",3,"clickOutside"],[1,"flex","justify-center","py-4"],[1,"text-red-500","text-sm","text-center","py-2"],[1,"space-y-3"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-500"],[1,"flex","items-center","space-x-3","cursor-pointer","hover:bg-gray-50","p-2","rounded"],["type","checkbox",1,"rounded","border-gray-300","text-blue-600","focus:ring-blue-500",3,"change","checked"],[1,"h-6","w-6","rounded",3,"src","alt"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"button",1),p("click",function(){return n.toggleDropdown()}),D(),r(2,"svg",2),m(3,"path",3),o(),R(),r(4,"span",4),l(5,"Streaming"),o(),r(6,"span",5),l(7),o()(),x(8,Sn,4,1,"div",6),o()),t&2&&(a(),B("ring-2",n.isOpen())("ring-blue-500",n.isOpen()),a(6),M("(",n.selectedCount(),")"),a(),g(n.isOpen()?8:-1))},dependencies:[S,it],encapsulation:2})};var xe=class i{ratingChanged=G();onRatingChange(e){let t=e.target.value;this.ratingChanged.emit(t?+t:null)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-rating-selector"]],outputs:{ratingChanged:"ratingChanged"},standalone:!0,features:[b],decls:13,vars:0,consts:[[1,"px-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"change"],["value",""],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"]],template:function(t,n){t&1&&(r(0,"select",0),p("change",function(d){return n.onRatingChange(d)}),r(1,"option",1),l(2,"Any Rating"),o(),r(3,"option",2),l(4,"5+ Stars"),o(),r(5,"option",3),l(6,"6+ Stars"),o(),r(7,"option",4),l(8,"7+ Stars"),o(),r(9,"option",5),l(10,"8+ Stars"),o(),r(11,"option",6),l(12,"9+ Stars"),o()())},dependencies:[S],encapsulation:2})};var ae=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(ae||{});function He(i,e){return{type:ae.Trigger,name:i,definitions:e,options:{}}}function le(i,e=null){return{type:ae.Animate,styles:e,timings:i}}function K(i){return{type:ae.Style,styles:i,offset:null}}function ce(i,e,t=null){return{type:ae.Transition,expr:i,animation:e,options:t}}function mi(i,e,t=null){return{type:ae.Query,selector:i,animation:e,options:t}}function hi(i,e){return{type:ae.Stagger,timings:i,animation:e}}var nt=class i{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:return this.sanitizer.bypassSecurityTrustUrl(e)}}static \u0275fac=function(t){return new(t||i)(v(Bt,16))};static \u0275pipe=je({name:"safe",type:i,pure:!0,standalone:!0})};var re=class i{constructor(e){this.http=e}baseUrl="https://api.themoviedb.org/3";apiKey=Ue.tmdbApiKey;getMovie(e){return this.http.get(`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&append_to_response=videos`).pipe(W(t=>t.status===404?U(()=>new Error("Movie not found")):U(()=>new Error("An error occurred while fetching movie data"))))}getMovieDetails(e){return this.http.get(`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&append_to_response=credits,reviews,similar,videos`).pipe(W(t=>t.status===404?U(()=>new Error("Movie details not found")):U(()=>new Error("An error occurred while fetching movie details"))))}searchMovies(e,t){let n=`${this.baseUrl}/search/movie?api_key=${this.apiKey}&query=${encodeURIComponent(e)}`;t&&t.length>0&&(n+=`&watch_region=BE&with_watch_providers=${t.join("|")}`);let O=[1,2,3,4,5].map(z=>this.http.get(`${n}&page=${z}`).pipe(L(N=>N.results)));return X(O).pipe(L(z=>{let N=z.flat();console.log("Before sorting:",N.map(J=>({title:J.title,vote_count:J.vote_count})));let de=N.sort((J,ut)=>(console.log(`Comparing ${J.title}(${J.vote_count}) with ${ut.title}(${ut.vote_count})`),(ut.vote_count||0)-(J.vote_count||0)));return console.log("After sorting:",de.map(J=>({title:J.title,vote_count:J.vote_count}))),de}),W(()=>U(()=>new Error("Error searching movies"))))}getPopularMovies(){return this.http.get(`${this.baseUrl}/movie/popular?api_key=${this.apiKey}`).pipe(L(e=>e.results),W(()=>U(()=>new Error("Error fetching popular movies"))))}discoverMovies(e){let t=E({api_key:this.apiKey,watch_region:"BE",with_watch_providers:"netflix",sort_by:"popularity.desc"},e),s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26].map(d=>this.http.get(`${this.baseUrl}/discover/movie`,{params:I(E({},t),{page:d})}).pipe(L(O=>O.results)));return X(s).pipe(L(d=>{let O=d.flat();console.log("Before sorting:",O.map(N=>({title:N.title,vote_count:N.vote_count})));let z=O.sort((N,de)=>(console.log(`Comparing ${N.title}(${N.vote_count}) with ${de.title}(${de.vote_count})`),(de.vote_count||0)-(N.vote_count||0)));return console.log("After sorting:",z.map(N=>({title:N.title,vote_count:N.vote_count}))),z}),W(()=>U(()=>new Error("Error discovering movies"))))}static \u0275fac=function(t){return new(t||i)(T(pe))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var rt=class i{constructor(e,t){this.movieService=e;this.streamingService=t}movieId;close=new te;movie=u(null);providers=u({flatrate:[],free:[],buy:[],rent:[]});ngOnInit(){this.loadMovieDetails()}loadMovieDetails(){X({movieDetails:this.movieService.getMovieDetails(this.movieId),providers:this.streamingService.getMovieAvailability(this.movieId)}).subscribe({next:({movieDetails:e,providers:t})=>{this.movie.set(e),this.providers.set({flatrate:t?.results?.BE?.flatrate||[],free:t?.results?.BE?.free||[],buy:t?.results?.BE?.buy||[],rent:t?.results?.BE?.rent||[]})},error:e=>console.error("Error loading movie details:",e)})}getOfficialTrailer(e){if(!e.videos?.results)return null;let t=e.videos.results.find(n=>n.type==="Trailer"&&n.official&&n.site==="YouTube");return t||e.videos.results.find(n=>n.type==="Trailer"&&n.site==="YouTube")||null}getYouTubeEmbedUrl(e){return`https://www.youtube.com/embed/${e}`}static \u0275fac=function(t){return new(t||i)(v(re),v(ne))};static \u0275cmp=y({type:i,selectors:[["app-movie-card"]],inputs:{movieId:"movieId"},outputs:{close:"close"},standalone:!0,features:[Pe([S,nt]),b],decls:1,vars:0,template:function(t,n){t&1&&l(0,"./movie-card.component.html")},encapsulation:2,data:{animation:[He("cardContent",[ce(":enter",[mi(".animate-item",[K({opacity:0,transform:"translateY(10px)"}),hi(50,[le("300ms ease-out",K({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])])]}})};var oe=class i{constructor(e){this.streamingService=e}#e=u([]);#t=u({});selectedProviders=this.#e.asReadonly();movieStreamingProviders=this.#t.asReadonly();updateSelectedProviders(e){this.#e.set(e)}loadStreamingProvidersForMovies(e){e.length&&X(e.map(t=>this.streamingService.getMovieAvailability(t.id).pipe(L(n=>({movieId:t.id,providers:n?.results?.BE?.flatrate||[]})),W(()=>Et({movieId:t.id,providers:[]}))))).subscribe({next:t=>{let n={};t.forEach(({movieId:s,providers:d})=>{n[s]=d}),this.#t.set(n)}})}static \u0275fac=function(t){return new(t||i)(T(ne))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var ot=class i{#e=u([]);searchHistory=this.#e.asReadonly();addToSearchHistory(e){this.#e().some(t=>t.id===e.id)||this.#e.update(t=>[e,...t].slice(0,5))}clearHistory(){this.#e.set([])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Me=class i{constructor(e,t,n){this.movieService=e;this.streamingProviderStore=t;this.searchHistoryStore=n}#e=u(!1);#t=u(null);#n=u([]);#i=u([]);#s=u("");#r=u(null);#o=u(null);selectedProviders=u([]);loading=this.#e.asReadonly();error=this.#t.asReadonly();movies=this.#n.asReadonly();suggestions=this.#i.asReadonly();searchTerm=this.#s.asReadonly();selectedMovie=this.#o.asReadonly();searchHistory=ie(()=>this.searchHistoryStore.searchHistory());updateSearchTerm(e){this.#s.set(e)}setSelectedMovie(e){this.#o.set(e),e&&(this.searchHistoryStore.addToSearchHistory(e),this.loadMovieDetails(e.id))}loadMovieDetails(e){this.movieService.getMovie(e).subscribe({next:t=>this.#o.set(I(E({},t),{videos:[]})),error:t=>{console.error("Error loading movie details:",t),this.#t.set("Error loading movie details")}})}setRatingThreshold(e){this.#r.set(e),this.refreshResults()}refreshResults(){let e=this.searchTerm();e.length>=2&&this.searchMovies(e)}searchMovies(e){if(e.length<2){this.clearResults();return}this.#e.set(!0),this.#t.set(null),this.movieService.searchMovies(e).subscribe({next:t=>{let n=this.filterMoviesByRating(t.map(s=>I(E({},s),{videos:[]})));this.#n.set(n),this.#i.set(n.slice(0,10)),this.streamingProviderStore.loadStreamingProvidersForMovies(n),this.#e.set(!1)},error:t=>this.handleError(t)})}filterMoviesByRating(e){return this.#r()===null?e:e.filter(t=>t.vote_average>=this.#r())}handleError(e){console.error("Search error:",e),this.#i.set([]),this.#n.set([]),this.#e.set(!1),this.#t.set(`API Error: ${e.message}`)}clearResults(){this.#n.set([]),this.#i.set([]),this.#t.set(null)}updateSelectedProviders(e){this.selectedProviders.set(e)}closeMovieDetails(){this.setSelectedMovie(null)}static \u0275fac=function(t){return new(t||i)(T(re),T(oe),T(ot))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Mn=(i,e)=>e.id;function wn(i,e){if(i&1){let t=_();r(0,"button",15),p("click",function(){h(t);let s=c().$implicit,d=c();return f(d.toggleFavorite(s))}),D(),r(1,"svg",16),m(2,"path",17),o()()}if(i&2){let t=c().$implicit,n=c();a(),B("fill-current",n.favoriteMovies().has(t.id))}}function Dn(i,e){if(i&1){let t=_();r(0,"div",5),m(1,"img",7),r(2,"div",8)(3,"h3",9),l(4),o(),r(5,"p",10),l(6),V(7,"date"),o(),r(8,"div",11)(9,"span",3),l(10),V(11,"number"),o(),x(12,wn,3,2,"button",12),o(),r(13,"div",13)(14,"button",14),p("click",function(){let s=h(t).$implicit,d=c();return f(d.openMovieDetails(s))}),l(15," View Details "),o()()()()}if(i&2){let t=e.$implicit,n=c();a(),C("src","https://image.tmdb.org/t/p/w500"+t.poster_path,$)("alt",t.title),a(3),A(t.title),a(2),M(" ",Z(7,6,t.release_date,"yyyy")," "),a(4),M(" Rating: ",Z(11,9,t.vote_average,"1.1-1")," "),a(2),g(n.authService.isAuthenticated()?12:-1)}}function Vn(i,e){if(i&1){let t=_();r(0,"div",18),p("click",function(){h(t);let s=c();return f(s.closeMovieDetails())}),r(1,"div",19),p("click",function(s){return h(t),f(s.stopPropagation())}),r(2,"div",20)(3,"h3",21),l(4,"Movie Details"),o(),r(5,"button",22),p("click",function(){h(t);let s=c();return f(s.closeMovieDetails())}),D(),r(6,"svg",23),m(7,"path",24),o()()(),R(),r(8,"div",25)(9,"app-movie-card",26),p("close",function(){h(t);let s=c();return f(s.closeMovieDetails())}),o()()()()}if(i&2){let t=c();a(9),C("movieId",t.searchStore.selectedMovie().id)}}var we=class i{constructor(e,t){this.authService=e;this.searchStore=t;this.authService.isAuthenticated()&&this.loadFavoriteMovies()}movies=q.required();favoriteMovies=u(new Set);loadFavoriteMovies(){this.authService.getFavoriteMovies().subscribe({next:e=>{this.favoriteMovies.set(new Set(e.map(t=>t.id)))},error:e=>console.error("Error loading favorites:",e)})}toggleFavorite(e){if(!this.authService.isAuthenticated())return;let t=this.favoriteMovies().has(e.id);(t?this.authService.removeFromFavorites(e.id):this.authService.addToFavorites(e.id)).subscribe({next:()=>{let s=new Set(this.favoriteMovies());t?s.delete(e.id):s.add(e.id),this.favoriteMovies.set(s)},error:s=>console.error("Error updating favorites:",s)})}openMovieDetails(e){this.searchStore.setSelectedMovie(e),document.body.style.overflow="hidden"}closeMovieDetails(){this.searchStore.closeMovieDetails(),document.body.style.overflow="auto"}static \u0275fac=function(t){return new(t||i)(v(Ge),v(Me))};static \u0275cmp=y({type:i,selectors:[["app-movie-search-results"]],inputs:{movies:[1,"movies"]},standalone:!0,features:[b],decls:11,vars:2,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","flex","flex-col"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"w-full","h-64","object-cover",3,"src","alt"],[1,"p-4","flex","flex-col","flex-grow"],[1,"font-semibold","text-lg","mb-2"],[1,"text-gray-600","text-sm","mb-2"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-red-500","hover:text-red-600"],[1,"mt-auto"],[1,"w-full","py-2","px-4","bg-blue-500","hover:bg-blue-600","text-white","rounded-md","transition-colors","duration-200",3,"click"],[1,"text-red-500","hover:text-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","max-w-3xl","w-full","max-h-[90vh]","overflow-y-auto","m-4",3,"click"],[1,"p-4","flex","justify-between","items-center","border-b"],[1,"text-xl","font-semibold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4"],[3,"close","movieId"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),l(4,"Search Results"),o(),r(5,"p",3),l(6),o()()(),r(7,"div",4),k(8,Dn,16,12,"div",5,Mn),o(),x(10,Vn,10,1,"div",6),o()),t&2&&(a(6),M(" Found ",n.movies().length," movies "),a(2),P(n.movies()),a(2),g(n.searchStore.selectedMovie()?10:-1))},dependencies:[S,Ht,Le,rt],encapsulation:2,data:{animation:[He("modalAnimation",[ce(":enter",[K({opacity:0}),le("2000ms ease-out",K({opacity:1}))]),ce(":leave",[le("2000ms ease-in",K({opacity:0}))])]),He("modalContent",[ce(":enter",[K({transform:"scale(0.95)",opacity:0}),le("200ms ease-out",K({transform:"scale(1)",opacity:1}))]),ce(":leave",[le("200ms ease-in",K({transform:"scale(0.95)",opacity:0}))])])]}})};var gi=(i,e)=>e.id;function En(i,e){if(i&1){let t=_();r(0,"li",17),p("click",function(){let s=h(t).$implicit,d=c(3);return f(d.selectMovie(s))}),m(1,"span",18),V(2,"titlecase"),V(3,"highlight"),r(4,"span",19),l(5),V(6,"date"),o()()}if(i&2){let t=e.$implicit,n=c(3);a(),C("innerHTML",Z(3,4,H(2,2,t.title),n.searchStore.searchTerm()),Ee),a(4),M("(",Z(6,7,t.release_date,"yyyy"),")")}}function kn(i,e){if(i&1&&(r(0,"div",13)(1,"div",15),l(2,"Suggestions"),o(),r(3,"ul"),k(4,En,7,10,"li",16,gi),o()()),i&2){let t=c(2);a(4),P(t.searchStore.suggestions())}}function Pn(i,e){if(i&1){let t=_();r(0,"button",22),p("click",function(){let s=h(t).$implicit,d=c(3);return f(d.selectMovie(s))}),l(1),o()}if(i&2){let t=e.$implicit;a(),M(" ",t.title," ")}}function Fn(i,e){if(i&1&&(r(0,"div",14)(1,"div",15),l(2,"Recent searches"),o(),r(3,"div",20),k(4,Pn,2,1,"button",21,gi),o()()),i&2){let t=c(2);a(4),P(t.searchStore.searchHistory())}}function An(i,e){if(i&1&&(r(0,"div",10),x(1,kn,6,0,"div",13)(2,Fn,6,0,"div",14),o()),i&2){let t=c();a(),g(t.searchStore.suggestions().length>0?1:-1),a(),g(t.searchStore.searchHistory().length>0?2:-1)}}function In(i,e){if(i&1&&(r(0,"p",11),l(1),o()),i&2){let t=c();a(),A(t.searchStore.error())}}function Tn(i,e){if(i&1&&m(0,"app-movie-search-results",12),i&2){let t=c();C("movies",t.searchStore.movies())}}var st=class i{constructor(e){this.searchStore=e}isLoading=q(!1);error=q(void 0);searchSubmitted=G();isInputFocused=u(!1);maxSuggestions=10;ngOnInit(){this.searchStore.clearResults()}onSearchTermChange(e){this.searchStore.updateSearchTerm(e),this.searchStore.searchMovies(e)}onInputBlur(){setTimeout(()=>{this.isInputFocused.set(!1)},200)}onProvidersChanged(e){this.searchStore.updateSelectedProviders(e)}selectMovie(e){console.log("Selecting movie:",e),this.searchStore.setSelectedMovie(e),this.searchStore.searchMovies(e.title),this.isInputFocused.set(!1),this.searchSubmitted.emit(e)}search(){let e=this.searchStore.searchTerm();e.length>=2&&(this.searchStore.searchMovies(e),this.isInputFocused.set(!1))}onRatingChange(e){let t=e.target.value;this.searchStore.setRatingThreshold(t?+t:null)}static \u0275fac=function(t){return new(t||i)(v(Me))};static \u0275cmp=y({type:i,selectors:[["app-movie-search"]],inputs:{isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{searchSubmitted:"searchSubmitted"},standalone:!0,features:[b],decls:13,vars:4,consts:[[1,"relative","w-full"],[1,"relative"],[1,"relative","flex","items-center","gap-4"],[1,"relative","flex-1"],[1,"absolute","inset-y-0","left-5","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search movies",1,"w-full","pl-14","pr-4","py-3","border-0","rounded-full","bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:bg-white","transition-colors","duration-200",3,"ngModelChange","focus","blur","keyup.enter","ngModel"],[3,"ratingChanged"],[3,"providersChanged"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"text-red-500","text-sm","mt-2"],[3,"movies"],[1,"p-3"],[1,"p-3","border-t","border-gray-100"],[1,"text-xs","text-gray-500","mb-2"],[1,"px-3","py-2","hover:bg-gray-100","cursor-pointer","rounded"],[1,"px-3","py-2","hover:bg-gray-100","cursor-pointer","rounded",3,"click"],[3,"innerHTML"],[1,"text-sm","text-gray-500"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","rounded-full"],[1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","rounded-full",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),D(),r(5,"svg",5),m(6,"path",6),o()(),R(),r(7,"input",7),p("ngModelChange",function(d){return n.onSearchTermChange(d)})("focus",function(){return n.isInputFocused.set(!0)})("blur",function(){return n.onInputBlur()})("keyup.enter",function(){return n.search()}),o()(),r(8,"app-rating-selector",8),p("ratingChanged",function(d){return n.searchStore.setRatingThreshold(d)}),o(),r(9,"app-streaming-selector",9),p("providersChanged",function(d){return n.onProvidersChanged(d)}),o()(),x(10,An,3,2,"div",10)(11,In,2,1,"p",11)(12,Tn,1,1,"app-movie-search-results",12),o()()),t&2&&(a(7),C("ngModel",n.searchStore.searchTerm()),a(3),g(n.isInputFocused()&&(n.searchStore.suggestions().length>0||n.searchStore.searchHistory().length>0)?10:-1),a(),g(n.searchStore.error()?11:-1),a(),g(n.searchStore.movies().length>0?12:-1))},dependencies:[S,Y,Le,_e,ve,Ye,Ne,be,Se,xe,we],encapsulation:2})};var at=class i{constructor(e,t){this.movieService=e;this.streamingProviderStore=t}#e=u(!1);#t=u(null);#n=u([]);#i=u(null);loading=this.#e.asReadonly();error=this.#t.asReadonly();movies=this.#n.asReadonly();ratingThreshold=this.#i.asReadonly();discoverMovies(){this.#e.set(!0),this.#t.set(null);let e={with_watch_providers:this.streamingProviderStore.selectedProviders().join("|"),"vote_average.gte":this.#i()};this.movieService.discoverMovies(e).subscribe({next:t=>{let n=this.filterMoviesByRating(t);this.#n.set(n),this.streamingProviderStore.loadStreamingProvidersForMovies(n),this.#e.set(!1)},error:t=>this.handleError(t)})}setRatingThreshold(e){this.#i.set(e),this.discoverMovies()}filterMoviesByRating(e){return this.#i()===null?e:e.filter(t=>t.vote_average>=this.#i())}handleError(e){console.error("Discover error:",e),this.#n.set([]),this.#e.set(!1),this.#t.set(`API Error: ${e.message}`)}clearResults(){this.#n.set([]),this.#t.set(null)}static \u0275fac=function(t){return new(t||i)(T(re),T(oe))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};function Nn(i,e){if(i&1&&(r(0,"p",6),l(1),o()),i&2){let t=c();a(),A(t.discoverStore.error())}}function Rn(i,e){if(i&1&&m(0,"app-movie-search-results",7),i&2){let t=c();C("movies",t.discoverStore.movies())}}var lt=class i{constructor(e,t){this.discoverStore=e;this.streamingProviderStore=t}ngOnInit(){this.discoverStore.clearResults()}onProvidersChanged(e){this.streamingProviderStore.updateSelectedProviders(e),this.discoverStore.discoverMovies()}search(){this.discoverStore.discoverMovies()}static \u0275fac=function(t){return new(t||i)(v(at),v(oe))};static \u0275cmp=y({type:i,selectors:[["app-movie-filter"]],standalone:!0,features:[b],decls:9,vars:2,consts:[[1,"relative","w-full"],[1,"relative"],[1,"relative","flex","items-center","gap-4"],[3,"ratingChanged"],[3,"providersChanged"],[1,"px-6","py-3","bg-blue-500","text-white","rounded-full","hover:bg-blue-600","transition-colors",3,"click"],[1,"text-red-500","text-sm","mt-2"],[3,"movies"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-rating-selector",3),p("ratingChanged",function(d){return n.discoverStore.setRatingThreshold(d)}),o(),r(4,"app-streaming-selector",4),p("providersChanged",function(d){return n.onProvidersChanged(d)}),o(),r(5,"button",5),p("click",function(){return n.search()}),l(6," Search Movies "),o()(),x(7,Nn,2,1,"p",6)(8,Rn,1,1,"app-movie-search-results",7),o()()),t&2&&(a(7),g(n.discoverStore.error()?7:-1),a(),g(n.discoverStore.movies().length>0?8:-1))},dependencies:[S,Se,xe,we],encapsulation:2})};var vi=[{path:"",component:tt,children:[{path:"by-title",component:st},{path:"by-filter",component:lt},{path:"",redirectTo:"by-title",pathMatch:"full"}]}];var _i=[{path:"",redirectTo:"pokemon",pathMatch:"full"},{path:"pokemon",component:et,title:"Pokemon Cards"},{path:"movies",loadChildren:()=>vi},{path:"profile",loadComponent:()=>import("./chunk-PM6OB3PF.js").then(i=>i.ProfilePageComponent),title:"Profile"},{path:"preferences",loadComponent:()=>import("./chunk-LZQJJBV3.js").then(i=>i.PreferencesPageComponent),title:"Preferences"},{path:"login",loadComponent:()=>import("./chunk-ONMVDRNF.js").then(i=>i.LoginPageComponent),title:"Login"},{path:"auth/callback",loadComponent:()=>import("./chunk-CF5TPK2H.js").then(i=>i.AuthCallbackComponent),title:"Authenticating..."}];var yi={providers:[Ot({eventCoalescing:!0}),Ut(_i),jt()]};var De=class i{isNavOpen=u(!0);toggleNav(){this.isNavOpen.update(e=>!e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};function Hn(i,e){if(i&1){let t=_();r(0,"div",27)(1,"a",28)(2,"span",29),l(3,"person"),o(),l(4," Profile "),o(),r(5,"a",30)(6,"span",29),l(7,"settings"),o(),l(8," Preferences "),o(),r(9,"button",31),p("click",function(){h(t);let s=c(2);return f(s.signOut())}),r(10,"span",29),l(11,"logout"),o(),l(12," Sign out "),o()()}}function jn(i,e){if(i&1){let t=_();r(0,"div",19)(1,"button",22),p("click",function(){h(t);let s=c();return f(s.toggleUserMenu())}),r(2,"div",23)(3,"span",24),l(4),o()(),r(5,"span",25),l(6),o(),r(7,"span",26),l(8),o()(),x(9,Hn,13,0,"div",27),o()}if(i&2){let t=c();a(4),A(t.getUserInitials()),a(2),A(t.userName()),a(2),M(" ",t.isUserMenuOpen()?"expand_less":"expand_more"," "),a(),g(t.isUserMenuOpen()?9:-1)}}function Ln(i,e){i&1&&(r(0,"a",20)(1,"span",32),l(2,"login"),o(),r(3,"span"),l(4,"Log in"),o()())}function Bn(i,e){if(i&1){let t=_();r(0,"div",33),p("click",function(){h(t);let s=c();return f(s.navigationService.toggleNav())}),o()}}var ct=class i{navigationService=Q(De);isUserMenuOpen=u(!1);isAuthenticated=u(!1);userName=u("John Doe");toggleUserMenu(){this.isUserMenuOpen.update(e=>!e)}getUserInitials(){return this.userName().split(" ").map(e=>e[0]).join("").toUpperCase()}signOut(){this.isAuthenticated.set(!1),this.isUserMenuOpen.set(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-nav"]],standalone:!0,features:[b],decls:29,vars:6,consts:[[1,"fixed","left-0","top-0","h-full","w-64","bg-[#6366F1]","text-white","p-4","transition-transform","duration-300","z-20"],[1,"flex","flex-col","h-full"],[1,"mb-8"],["width","32","height","32","viewBox","0 0 32 32","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","16","cy","16","r","15","fill","#3B82F6"],["x","8","y","10","width","16","height","12","fill","white","opacity","0.9"],["x","10","y","12","width","2","height","2","fill","#3B82F6"],["x","10","y","18","width","2","height","2","fill","#3B82F6"],["x","20","y","12","width","2","height","2","fill","#3B82F6"],["x","20","y","18","width","2","height","2","fill","#3B82F6"],["cx","14","cy","16","r","3","stroke","white","stroke-width","2","fill","none"],["d","M16.5 18.5L19.5 21.5","stroke","white","stroke-width","2","stroke-linecap","round"],["d","M20 14C21.5 14 22.5 15 23 16","stroke","white","stroke-width","1.5","stroke-linecap","round","fill","none"],["d","M20 16C21 16 21.5 16.5 22 17","stroke","white","stroke-width","1.5","stroke-linecap","round","fill","none"],[1,"space-y-4","flex-grow"],["routerLink","/pokemon","routerLinkActive","bg-white/20",1,"flex","items-center","space-x-3","px-4","py-2","rounded-lg","hover:bg-white/10"],[1,"material-icons"],["routerLink","/movies","routerLinkActive","bg-white/20",1,"flex","items-center","space-x-3","px-4","py-2","rounded-lg","hover:bg-white/10"],[1,"mt-auto"],[1,"relative"],["routerLink","/login",1,"flex","items-center","px-4","py-2","rounded-lg","hover:bg-white/10"],[1,"lg:hidden","fixed","inset-0","bg-black","bg-opacity-50","z-10"],[1,"w-full","flex","items-center","px-4","py-2","rounded-lg","hover:bg-white/10",3,"click"],[1,"h-8","w-8","rounded-full","bg-white/20","flex","items-center","justify-center","mr-3"],[1,"text-sm","font-medium"],[1,"flex-grow","text-left"],[1,"material-icons","text-sm"],[1,"absolute","bottom-full","left-0","w-full","mb-2","bg-white","rounded-lg","shadow-lg","overflow-hidden"],["routerLink","/profile",1,"block","px-4","py-2","text-gray-700","hover:bg-gray-100"],[1,"material-icons","text-sm","mr-2"],["routerLink","/preferences",1,"block","px-4","py-2","text-gray-700","hover:bg-gray-100"],[1,"w-full","px-4","py-2","text-left","text-gray-700","hover:bg-gray-100",3,"click"],[1,"material-icons","mr-3"],[1,"lg:hidden","fixed","inset-0","bg-black","bg-opacity-50","z-10",3,"click"]],template:function(t,n){t&1&&(r(0,"nav",0)(1,"div",1)(2,"div",2),D(),r(3,"svg",3),m(4,"circle",4)(5,"rect",5)(6,"rect",6)(7,"rect",7)(8,"rect",8)(9,"rect",9)(10,"circle",10)(11,"path",11)(12,"path",12)(13,"path",13),o()(),R(),r(14,"div",14)(15,"a",15)(16,"span",16),l(17,"catching_pokemon"),o(),r(18,"span"),l(19,"Pokemon"),o()(),r(20,"a",17)(21,"span",16),l(22,"movie"),o(),r(23,"span"),l(24,"Movies"),o()()(),r(25,"div",18),x(26,jn,10,4,"div",19)(27,Ln,5,0,"a",20),o()()(),x(28,Bn,1,0,"div",21)),t&2&&(B("translate-x-0",n.navigationService.isNavOpen())("-translate-x-full",!n.navigationService.isNavOpen()),a(26),g(n.isAuthenticated()?26:27),a(2),g(n.navigationService.isNavOpen()?28:-1))},dependencies:[S,me],encapsulation:2})};function Un(i,e){i&1&&(D(),r(0,"svg",5),m(1,"path",12),o())}function Gn(i,e){i&1&&(D(),r(0,"svg",5),m(1,"path",13),o())}function $n(i,e){if(i&1){let t=_();r(0,"div",19)(1,"a",20),l(2," Your Profile "),o(),r(3,"a",21),l(4," Preferences "),o(),r(5,"button",22),p("click",function(){h(t);let s=c(2);return f(s.signOut())}),l(6," Sign out "),o()()}}function zn(i,e){if(i&1){let t=_();r(0,"div",9)(1,"button",14),p("click",function(){h(t);let s=c();return f(s.toggleUserMenu())}),m(2,"img",15),r(3,"span",16),l(4),o(),D(),r(5,"svg",17),m(6,"path",18),o()(),x(7,$n,7,0,"div",19),o()}if(i&2){let t,n=c();a(2),C("src",n.authService.getUserAvatar(),$),a(2),M(" ",(t=n.authService.currentUser())==null?null:t.username," "),a(3),g(n.isUserMenuOpen()?7:-1)}}function Wn(i,e){if(i&1){let t=_();r(0,"button",23),p("click",function(){h(t);let s=c();return f(s.authService.login())}),l(1," Log in "),o()}}var dt=class i{authService=Q(Ge);isUserMenuOpen=u(!1);navigationService=Q(De);toggleUserMenu(){this.isUserMenuOpen.update(e=>!e)}signOut(){this.isUserMenuOpen.set(!1),this.authService.logout()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-root"]],standalone:!0,features:[b],decls:16,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"transition-all","duration-300"],[1,"bg-white","border-b","px-8","py-4"],[1,"flex","items-center","justify-between"],[1,"p-2","hover:bg-gray-100","rounded-full","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-500"],[1,"flex","items-center","space-x-4"],[1,"p-2","hover:bg-gray-100","rounded-full"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"relative"],[1,"text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","px-4","py-2"],[1,"p-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex","items-center","space-x-2","hover:bg-gray-100","rounded-lg","p-2",3,"click"],["alt","Profile",1,"h-8","w-8","rounded-full",3,"src"],[1,"text-sm","font-medium","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","py-1"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["routerLink","/preferences",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","px-4","py-2",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-nav"),r(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),p("click",function(){return n.navigationService.toggleNav()}),x(6,Un,2,0,":svg:svg",5)(7,Gn,2,0,":svg:svg",5),o(),r(8,"div",6)(9,"button",7),D(),r(10,"svg",5),m(11,"path",8),o()(),x(12,zn,8,3,"div",9)(13,Wn,2,0,"button",10),o()()(),R(),r(14,"main",11),m(15,"router-outlet"),o()()()),t&2&&(a(2),B("ml-64",n.navigationService.isNavOpen())("ml-0",!n.navigationService.isNavOpen()),a(4),g(n.navigationService.isNavOpen()?6:7),a(6),g(n.authService.isAuthenticated()?12:13))},dependencies:[S,Be,me,ct],encapsulation:2})};Lt(dt,yi).catch(i=>console.error(i));
